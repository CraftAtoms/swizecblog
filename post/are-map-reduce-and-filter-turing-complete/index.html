<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/swizecwp/component---src-components-post-js.a8953a73f94ec29b14b1.css">@import url(https://fonts.googleapis.com/css?family=Lora);
html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;font-family:Lora,serif}body{background-color:#f6f6f6;margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{-webkit-text-decoration-skip:objects;background-color:transparent}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:Lora,serif;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{box-sizing:border-box;font:112.5%/1.45em georgia,serif;overflow-y:scroll}*,:after,:before{box-sizing:inherit}body{-moz-font-feature-settings:"kern","liga","clig","calt";-ms-font-feature-settings:"kern","liga","clig","calt";-webkit-font-feature-settings:"kern","liga","clig","calt";color:rgba(0,0,0,.8);font-family:Lora,serif;font-feature-settings:"kern","liga","clig","calt";font-kerning:normal;font-weight:400;word-wrap:break-word}img{margin:0 0 1.45rem;max-width:100%;padding:0}h1{font-size:2.25rem}h1,h2{color:inherit;font-family:Lora,serif;font-weight:700;line-height:1.1;margin:0 0 1.45rem;padding:0;text-rendering:optimizeLegibility}h2{font-size:1.62671rem}h3{font-size:1.38316rem}h3,h4{color:inherit;font-family:Lora,serif;font-weight:700;line-height:1.1;margin:0 0 1.45rem;padding:0;text-rendering:optimizeLegibility}h4{font-size:1rem}h5{font-size:.85028rem}h5,h6{color:inherit;font-family:Lora,serif;font-weight:700;line-height:1.1;margin:0 0 1.45rem;padding:0;text-rendering:optimizeLegibility}h6{font-size:.78405rem}hgroup{margin:0 0 1.45rem;padding:0}ol,ul{list-style-image:none;list-style-position:outside;margin:0 0 1.45rem 1.45rem;padding:0}dd,dl,figure,p{margin:0 0 1.45rem;padding:0}pre{background:rgba(0,0,0,.04);border-radius:3px;font-size:.85rem;line-height:1.42;margin:0 0 1.45rem;overflow:auto;padding:1.45rem;word-wrap:normal}table{border-collapse:collapse;font-size:1rem;line-height:1.45rem;width:100%}fieldset,table{margin:0 0 1.45rem;padding:0}blockquote{margin:0 1.45rem 1.45rem;padding:0}form,iframe,noscript{margin:0 0 1.45rem;padding:0}hr{background:rgba(0,0,0,.2);border:none;height:1px;margin:0 0 calc(1.45rem - 1px);padding:0}address{margin:0 0 1.45rem;padding:0}b,dt,strong,th{font-weight:700}li{margin-bottom:.725rem}ol li,ul li{padding-left:0}li>ol,li>ul{margin-bottom:.725rem;margin-left:1.45rem;margin-top:.725rem}blockquote :last-child,li :last-child,p :last-child{margin-bottom:0}li>p{margin-bottom:.725rem}code,kbd,samp{font-size:.85rem;line-height:1.45rem}abbr,abbr[title],acronym{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help}abbr[title]{text-decoration:none}td,th,thead{text-align:left}td,th{-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";border-bottom:1px solid rgba(0,0,0,.12);font-feature-settings:"tnum";padding:.725rem .96667rem calc(.725rem - 1px)}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}code,tt{background-color:rgba(0,0,0,.04);border-radius:3px;font-family:Lora,serif;padding:.2em 0}pre code{background:none;line-height:1.42}code:after,code:before,tt:after,tt:before{content:" ";letter-spacing:-.2em}pre code:after,pre code:before,pre tt:after,pre tt:before{content:""}@media only screen and (max-width:480px){html{font-size:100%}}

/*# sourceMappingURL=component---src-components-post-js.a8953a73f94ec29b14b1.css.map*/</style><style data-styled-components="cEsjyT hklXLQ gpHXOM cTUdjA">
/* sc-component-id: sc-bdVaJa */
.cEsjyT{margin:3rem auto;max-width:960px;padding:1.25rem 1rem;} .cEsjyT ul{margin:0 0 0px 0;list-style:none;float:right;}
/* sc-component-id: sc-bwzfXH */
.cTUdjA{-webkit-text-decoration:none;text-decoration:none;text-align:right;margin:0 .5rem 0 .5rem;padding:10px;color:#7c51a1;} .cTUdjA:hover{color:#fff;background-color:#7c51a1;}
/* sc-component-id: sc-htpNat */
.gpHXOM{-webkit-text-decoration:none;text-decoration:none;color:black;} .gpHXOM:hover{-webkit-text-decoration:underline;text-decoration:underline;color:#7c51a1;} .gpHXOM h3{display:inline;font-size:30px;}
/* sc-component-id: sc-bxivhb */
.hklXLQ{margin:0 3rem 4.5rem;}</style><title data-react-helmet="true">Swizec Blog</title><meta data-react-helmet="true" name="description" content="Sample"/><meta data-react-helmet="true" name="keywords" content="sample, something"/><link as="script" rel="preload" href="/swizecwp/component---src-components-post-js-f2c2d6ca006cef019723.js"/><link as="script" rel="preload" href="/swizecwp/0-ce760dfe358fb4e73f84.js"/><link as="script" rel="preload" href="/swizecwp/app-affbd460d24d53f1fc4a.js"/><link as="script" rel="preload" href="/swizecwp/webpack-runtime-7742d5ce65cd19570880.js"/><link rel="preload" href="/swizecwp/static/d/918/path---post-are-map-reduce-and-filter-turing-complete-16-f-876-6iSlECfgSmOHjUCWyvnAD7iBr4.json" as="fetch" crossOrigin="use-credentials"/></head><body><div id="___gatsby"><div><div class="sc-bdVaJa cEsjyT"><div class="sc-bxivhb hklXLQ"><a class="sc-htpNat gpHXOM" href="/swizecwp/"><h3>Swizec Teller</h3></a><ul><a class="sc-bwzfXH cTUdjA" href="/swizecwp/Business/">Business</a><a class="sc-bwzfXH cTUdjA" href="/swizecwp/Personal/">Personal</a><a class="sc-bwzfXH cTUdjA" href="/swizecwp/Technical/">Technical</a><a class="sc-bwzfXH cTUdjA" href="/swizecwp/Thoughts/">Thoughts</a></ul></div><h1>Are map, reduce, and filter turing complete?</h1><div><p>Yes.</p>
<p>You can implement any algorithm with map, reduce, and filter when taken in the context of modern languages that implement these constructs. The predicate functions they rely on are turing complete, which makes them turing complete by extension.</p>
<p>But that&#8217;s smartass answer isn&#8217;t it? Implementing your whole algorithm in a predicate function and wrapping it in a map call feels like cheating.</p>
<p>Can you implement an algorithm <em>just</em> with map, reduce, and filter?</p>
<p>No.</p>
<p>Those three functions on their own can&#8217;t do squat. Writing something like <code>map(reduce(reduce(map(reduce(filter(4))))))</code> will not make anything happen.</p>
<p>We first have to decide what we&#8217;re trying to ask.</p>
<p>I&#8217;ve been losing sleep over this whole thing ever since a technical editor nerdsniped me last week. <em>&#8220;A smart man once told me you can write any program as a sequence of map and reduce calls. I like to add filter for a more comprehensive toolset.&#8221;</em>, I wrote in <a href="http://www.packtpub.com/data-visualization-with-d3js/book">Data Visualization with d3.js</a>.</p>
<p>The editor&#8217;s only comment was <em>&#8220;This is wrong. For instance, you can&#8217;t implement sorting like this.&#8221;</em></p>
<p>And well, yes, he&#8217;s right. But he also isn&#8217;t. What did Smart Guy &#8482; try to tell me all those years ago when he introduced me to functional programming?</p>
<p>Back to basics.</p>
<p>To have a <a class="zem_slink" title="Turing completeness" href="http://en.wikipedia.org/wiki/Turing_completeness" target="_blank" rel="wikipedia">turing complete language</a> you need:</p>
<ol>
<li>Write cell</li>
<li>Read cell</li>
<li>Move left</li>
<li>Move right</li>
<li>Branching (based on cell value)</li>
</ol>
<p>We assume our memory is practically infinite. Meaning it&#8217;s not infinite per se, but we can add more when we run out.</p>
<p>In his <a href="http://swizec.com/blog/the-birth-of-lisp-a-summary-of-john-mccarthys-original-paper/swizec/5075">LISP-creating paper, McCarthy wrote</a> that a recursive alternative to an iterative turing machine needs the following constructs:</p>
<ol>
<li><code>atom</code> &#8211; is this symbol an atom (one of the basic characters)</li>
<li><code>eq</code> &#8211; are both these symbols atoms</li>
<li><code>car</code> &#8211; returns the first part of a two-element list</li>
<li><code>cdr</code> &#8211; returns the second part of a two-element list</li>
<li><code>cons</code> &#8211; constructs a list from two elements</li>
<li>recursive definitions using these five constructs</li>
</ol>
<p>Where does this leave us in regards to our original question? <em>Can</em> we construct anything out of a sequence of map, reduce, and filter?</p>
<p>It depends.</p>
<p>In the context of a strict <a class="zem_slink" title="Functional programming" href="http://en.wikipedia.org/wiki/Functional_programming" target="_blank" rel="wikipedia">functional language</a>, with the addition of recursion, yes we probably can.</p>
<p>After all, implementing a naive <a class="zem_slink" title="Quicksort" href="http://en.wikipedia.org/wiki/Quicksort" target="_blank" rel="wikipedia">quicksort</a> in <a class="zem_slink" title="Haskell (programming language)" href="http://haskell.org" target="_blank" rel="homepage">Haskell</a> takes nothing more than recursion, <code>car</code>, <code>cdr</code>, <code>cons</code> and filter.</p>
<pre lang="haskell">
quicksort [] = []
quicksort (x:xs) =
          let smaller = quicksort (filter (<=x) xs)
              bigger = quicksort (filter (>x) xs)
          in smaller ++ [x] ++ bigger
</pre>
<p>Basically, if <code>quicksort</code> gets an empty list, return an empty list. Otherwise make a new list and put elements smaller than <code>x</code> on left, bigger on right. <code>++</code> is essentially cons and that <code>(x:xs)</code> bit splits the list so the first item becomes <code>x</code> and the other items become <code>xs</code>.</p>
<p>One of the tersest sorting implementations I&#8217;ve ever seen. And we didn&#8217;t <em>really</em> go out of our map, reduce, filter framework did we? The ability to append to and split lists is usually assumed.</p>
<p>But can we go a step further? Can we implement <code>filter</code> with map and reduce? Let&#8217;s try.</p>
<pre lang="javascript">
function filter (predicate, list) {
    return list.map(function (a) {
        return predicate(a) ? [a] : null;
    }).reduce(function (prev, current) {
        return current ? prev.concat(current) : prev;
    }, []);
}
</pre>
<p>Yes we can. Even in Javascript, which the original question was about. It&#8217;s rather simple &#8211; mark unwanted entries with <code>map</code>, then use <code>reduce</code> to create a new list sans unwanted entries.</p>
<p>We could go a step further and use only <code>reduce</code>.</p>
<pre lang="javascript">
function filter2 (predicate, list) {
    return list.reduce(function (prev, current) {
        return predicate(current) ? prev.concat(current) : prev;
    }, []);
}
</pre>
<p>Turns out <code>reduce</code> and <code>filter</code> are the same function once you assume branching and comparison are a given. <code>.concat</code> is Javascript&#8217;s version of cons by the way.</p>
<p>We can implement that Haskell example in <a class="zem_slink" title="JavaScript" href="http://en.wikipedia.org/wiki/JavaScript" target="_blank" rel="wikipedia">Javascript</a> as well. Proving that even with Javascript recursion, map, and reduce are enough to do anything.</p>
<pre lang="javascript">
function quicksort (list) {
    if (list.length == 0) {
        return [];
    }

    var x = list[0],
        xs = list.slice(1);

    return quicksort(filter2(function (a) { return a <= x; }, xs))
        .concat(x)
        .concat(
            quicksort(filter2(function (a) { return a > x; }, xs)));
}
</pre>
<p>Exact same code as before, just wordier because Javascript is fluffier than Haskell.</p>
<p>But are we any closer to discovering our question?</p>
<p>Not really no. We&#8217;ve just shown that given conditionals, a way to slice and append lists, recursion, map, and reduce we can do anything. Even in Javascript.</p>
<div class="zemanta-pixie" style="margin-top: 10px; height: 15px;"><a class="zemanta-pixie-a" title="Enhanced by Zemanta" href="http://www.zemanta.com/?px"><img class="zemanta-pixie-img" style="border: none; float: right;" alt="Enhanced by Zemanta" src="http://img.zemanta.com/zemified_e.png?x-id=5af887dc-447d-4f5a-98dc-08047cfee16f" /></a></div>
</div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-components-post-js","jsonName":"post-are-map-reduce-and-filter-turing-complete-16f","path":"/post/are-map-reduce-and-filter-turing-complete/"};window.dataPath="918/path---post-are-map-reduce-and-filter-turing-complete-16-f-876-6iSlECfgSmOHjUCWyvnAD7iBr4";/*]]>*/</script><script src="/swizecwp/webpack-runtime-7742d5ce65cd19570880.js" async=""></script><script src="/swizecwp/app-affbd460d24d53f1fc4a.js" async=""></script><script src="/swizecwp/0-ce760dfe358fb4e73f84.js" async=""></script><script src="/swizecwp/component---src-components-post-js-f2c2d6ca006cef019723.js" async=""></script></body></html>