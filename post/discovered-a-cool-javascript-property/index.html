<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/swizecblog/component---src-components-post-js.345c7c4f16662f410581.css">@import url(https://fonts.googleapis.com/css?family=Lora);
html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;font-family:Lora,serif}body{background-color:#f6f6f6;margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{-webkit-text-decoration-skip:objects;background-color:transparent}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:Lora,serif;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{box-sizing:border-box;font:112.5%/1.45em georgia,serif;overflow-y:scroll}*,:after,:before{box-sizing:inherit}body{-moz-font-feature-settings:"kern","liga","clig","calt";-ms-font-feature-settings:"kern","liga","clig","calt";-webkit-font-feature-settings:"kern","liga","clig","calt";color:rgba(0,0,0,.8);font-family:Lora,serif;font-feature-settings:"kern","liga","clig","calt";font-kerning:normal;font-weight:400;word-wrap:break-word}img{margin:0 0 1.45rem;max-width:100%;padding:0}h1{font-size:2.25rem}h1,h2{color:inherit;font-family:Lora,serif;font-weight:700;line-height:1.1;margin:0 0 1.45rem;padding:0;text-rendering:optimizeLegibility}h2{font-size:1.62671rem}h3{font-size:1.38316rem}h3,h4{color:inherit;font-family:Lora,serif;font-weight:700;line-height:1.1;margin:0 0 1.45rem;padding:0;text-rendering:optimizeLegibility}h4{font-size:1rem}h5{font-size:.85028rem}h5,h6{color:inherit;font-family:Lora,serif;font-weight:700;line-height:1.1;margin:0 0 1.45rem;padding:0;text-rendering:optimizeLegibility}h6{font-size:.78405rem}hgroup{margin:0 0 1.45rem;padding:0}ol,ul{list-style-image:none;list-style-position:outside;margin:0 0 1.45rem 1.45rem;padding:0}dd,dl,figure,p{margin:0 0 1.45rem;padding:0}pre{background:rgba(0,0,0,.04);border-radius:3px;font-size:.85rem;line-height:1.42;margin:0 0 1.45rem;overflow:auto;padding:1.45rem;word-wrap:normal}table{border-collapse:collapse;font-size:1rem;line-height:1.45rem;width:100%}fieldset,table{margin:0 0 1.45rem;padding:0}blockquote{margin:0 1.45rem 1.45rem;padding:0}form,iframe,noscript{margin:0 0 1.45rem;padding:0}hr{background:rgba(0,0,0,.2);border:none;height:1px;margin:0 0 calc(1.45rem - 1px);padding:0}address{margin:0 0 1.45rem;padding:0}b,dt,strong,th{font-weight:700}li{margin-bottom:.725rem}ol li,ul li{padding-left:0}li>ol,li>ul{margin-bottom:.725rem;margin-left:1.45rem;margin-top:.725rem}blockquote :last-child,li :last-child,p :last-child{margin-bottom:0}li>p{margin-bottom:.725rem}code,kbd,samp{font-size:.85rem;line-height:1.45rem}abbr,abbr[title],acronym{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help}abbr[title]{text-decoration:none}td,th,thead{text-align:left}td,th{-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";border-bottom:1px solid rgba(0,0,0,.12);font-feature-settings:"tnum";padding:.725rem .96667rem calc(.725rem - 1px)}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}code,tt{background-color:rgba(0,0,0,.04);border-radius:3px;font-family:Lora,serif;padding:.2em 0}pre code{background:none;line-height:1.42}code:after,code:before,tt:after,tt:before{content:" ";letter-spacing:-.2em}pre code:after,pre code:before,pre tt:after,pre tt:before{content:""}@media only screen and (max-width:480px){html{font-size:100%}}

/*# sourceMappingURL=component---src-components-post-js.345c7c4f16662f410581.css.map*/</style><style data-styled-components="cEsjyT hklXLQ gpHXOM cTUdjA">
/* sc-component-id: sc-bdVaJa */
.cEsjyT{margin:3rem auto;max-width:960px;padding:1.25rem 1rem;} .cEsjyT ul{margin:0 0 0px 0;list-style:none;float:right;}
/* sc-component-id: sc-bwzfXH */
.cTUdjA{-webkit-text-decoration:none;text-decoration:none;text-align:right;margin:0 .5rem 0 .5rem;padding:10px;color:#7c51a1;} .cTUdjA:hover{color:#fff;background-color:#7c51a1;}
/* sc-component-id: sc-htpNat */
.gpHXOM{-webkit-text-decoration:none;text-decoration:none;color:black;} .gpHXOM:hover{-webkit-text-decoration:underline;text-decoration:underline;color:#7c51a1;} .gpHXOM h3{display:inline;font-size:30px;}
/* sc-component-id: sc-bxivhb */
.hklXLQ{margin:0 3rem 4.5rem;}</style><title data-react-helmet="true">Swizec Blog</title><meta data-react-helmet="true" name="description" content="Sample"/><meta data-react-helmet="true" name="keywords" content="sample, something"/><link as="script" rel="preload" href="/swizecblog/component---src-components-post-js-dbedf083f25f7ad1f3b1.js"/><link as="script" rel="preload" href="/swizecblog/0-f215691c134019ee6fa5.js"/><link as="script" rel="preload" href="/swizecblog/app-49ff0b4ea28eff25fc3b.js"/><link as="script" rel="preload" href="/swizecblog/webpack-runtime-b34af8fd410bb07c9828.js"/><link rel="preload" href="/swizecblog/static/d/612/path---post-discovered-a-cool-javascript-property-aab-0c8-76eWujO0jbuLTXqmhEVnoEi26FQ.json" as="fetch" crossOrigin="use-credentials"/></head><body><div id="___gatsby"><div><div class="sc-bdVaJa cEsjyT"><div class="sc-bxivhb hklXLQ"><a class="sc-htpNat gpHXOM" href="/swizecblog/"><h3>Swizec Teller</h3></a><ul><a class="sc-bwzfXH cTUdjA" href="/swizecblog/Business/">Business</a><a class="sc-bwzfXH cTUdjA" href="/swizecblog/Personal/">Personal</a><a class="sc-bwzfXH cTUdjA" href="/swizecblog/Technical/">Technical</a><a class="sc-bwzfXH cTUdjA" href="/swizecblog/Thoughts/">Thoughts</a></ul></div><h1>Discovered a cool javascript property</h1><div><p>Yesterday I was playing around with javascript trtying to find the cleanest way to implement <a class="zem_slink freebase/en/callback" title="Callback (computer programming)" rel="wikipedia" href="http://en.wikipedia.org/wiki/Callback_%28computer_programming%29">callbacks</a> in <a class="zem_slink freebase/m/07k2_y8" title="Function (mathematics)" rel="wikipedia" href="http://en.wikipedia.org/wiki/Function_%28mathematics%29">functions</a>. Primarily I wanted a readable way to make certain the last argument passed is a callback, withut having to rely on knowing how many <a class="zem_slink freebase/en/argument" title="Argument" rel="wikipedia" href="http://en.wikipedia.org/wiki/Argument">arguments</a> there are and so on.</p>
<p>Instead I stumbled upon a pretty cool feature of how javascript handles function arguments. But let&#8217;s look at some code.</p>
<p>This is the usual way people use functions, it&#8217;s nicely standard and works pretty much the same way in most languages</p>
<pre lang="javascript" line="1">function example(arg1, arg2, arg3) {
    return arg1+arg2 == arg3;
}

example(1, 2, 3);</pre>
<p>Nothing too spectacular here, but javascript has another way to access function arguments &#8211; the magical arguments object; granted, a lot of languages have something like this, but it&#8217;s always a less than obvious feature people often forget about:</p>
<pre lang="javascript" line="1">function example() {
    console.log(arguments);
    // prints { '0': 1, '1': 2, '2': 3 }
}

example(1, 2, 3);</pre>
<p>Ok, nothing too major, perhaps the biggest surprise is that arguments is an object, not a list or an array and strangely enough that the keys are strings despite being just numbers. Also pretty cool is that you don&#8217;t have to specify any arguments at all, it just magically works. In python for example you at least have to say *args or something like that.</p>
<p>But things really start to heat up when we mix both ways of using function arguments in javascript:</p>
<pre lang="javascript" line="1">function example(arg) {
    console.log(arguments);
    // prints { '0': 1, '1': 2, '2': 3 }

    arg = 5;
    console.log(arguments);
    // prints { '0': 5, '1': 2, '2': 3 }

    var arg = 'new';
    console.log(arguments);
    // prints { '0': 'new', '1': 2, '2': 3 }

    var notArg = arg;
    notArg = 'old';
    console.log(arguments);
    // prints { '0': 'new', '1': 2, '2': 3 }

    arguments[1] = arg;
    console.log(arguments);
    // prints { '0': 'new', '1': 'new', '2': 3 }

    arg = 5;
    console.log(arguments);
    // prints { '0': 5, '1': 'new', '2': 3 }
}

example(1, 2, 3);</pre>
<p>The slightly strange thing here is that arguments the function takes explicitly are only references to the positions in the arguments object rather than variables of their own. Trying to make them a new variable doesn&#8217;t work unless you give them a different name.</p>
<p>However despite these being just pointers, you can&#8217;t make them cross-reference each other because when you assign them to the arguments object a copy is performed and further changes are not reflected in both arguments properties.</p>
<p>But is it a deep or a <a class="zem_slink freebase/en/object_copy" title="Object copy" rel="wikipedia" href="http://en.wikipedia.org/wiki/Object_copy">shallow copy</a>? Let&#8217;s try:</p>
<pre lang="javascript" line="1">function isitdeep(arg1, arg2) {
    console.log(arguments);
    // prints { '0': { a: { b: 'c' }, d: { e: 'f' } },
    //          '1': { g: 'h' } }

    arg1.a.b = 'f';
    console.log(arguments);
    // prints { '0': { a: { b: 'f' }, d: { e: 'f' } },
    //          '1': { g: 'h' } }

    arg2 = arg1;
    console.log(arguments);
    // prints { '0': { a: { b: 'f' }, d: { e: 'f' } },
    //          '1': { a: { b: 'f' }, d: { e: 'f' } } }

    arg1.a.b = 'c';
    console.log(arguments);
    // prints { '0': { a: { b: 'c' }, d: { e: 'f' } },
    //          '1': { a: { b: 'c' }, d: { e: 'f' } } }

    arg1 = 'hello world';
    console.log(arguments);
    // prints { '0': 'hello world',
    //          '1': { a: { b: 'c' }, d: { e: 'f' } } }
}

isitdeep({a: {b: 'c'}, d: {e: 'f'}},
	 {g: 'h'});</pre>
<p>Interesting, turns out it&#8217;s a shallow copy and you can still poke arguments in strange ways &#8230; but maybe/probably that&#8217;s just how javascript performs in general, the = operator being a shallow copy mechanism.</p>
<p>Anyhow, I&#8217;m sure this knowledge will come in handy some day, I&#8217;m just nicely tickled by having found it. Actually &#8230; it&#8217;s kind of horrible, this sort of obscure language features should never be used in <a class="zem_slink freebase/en/production_code" title="Motion Picture Production Code" rel="wikipedia" href="http://en.wikipedia.org/wiki/Motion_Picture_Production_Code">production code</a> 🙂</p>
<h6 class="zemanta-related-title" style="font-size: 1em;">Related articles</h6>
<ul class="zemanta-article-ul">
<li class="zemanta-article-ul-li"><a href="http://www.w2lessons.com/2011/04/you-dont-know-javascript.html">You Don&#8217;t Know JavaScript</a> (w2lessons.com)</li>
<li class="zemanta-article-ul-li"><a href="http://ejohn.org/blog/fast-javascript-maxmin/">Fast JavaScript Max/Min</a> (ejohn.org)</li>
<li class="zemanta-article-ul-li"><a href="http://mihai.bazon.net/blog/amb-in-javascript">Amb in JavaScript</a> (mihai.bazon.net)</li>
<li class="zemanta-article-ul-li"><a href="http://zef.me/3715/three-routes-to-spaghetti-free-javascript">Three Routes to Spaghetti-Free Javascript</a> (zef.me)</li>
<li class="zemanta-article-ul-li"><a href="http://venkatb4me.wordpress.com/2011/03/23/javascript-interview-questions-and-answers/">JavaScript interview questions and answers</a> (venkatb4me.wordpress.com)</li>
<li class="zemanta-article-ul-li"><a href="http://sayyouresorryforwhatyouvedone.blogspot.com/2011/04/douglas-crockford-for-javascript-good.html">&#8220;JavaScript: The Good Parts&#8221;, You Owe Me An Apology</a> (sayyouresorryforwhatyouvedone.blogspot.com)</li>
<li class="zemanta-article-ul-li"><a href="http://www.infoq.com/news/2011/04/javascript-lamp">Will the Rise of Javascript Mean the End of LAMP?</a> (infoq.com)</li>
</ul>
<div class="zemanta-pixie" style="margin-top: 10px; height: 15px;"><a class="zemanta-pixie-a" title="Enhanced by Zemanta" href="http://www.zemanta.com/"><img class="zemanta-pixie-img" style="border: none; float: right;" src="http://img.zemanta.com/zemified_e.png?x-id=1f7fa21d-b33c-4405-9a6f-c5c9e51030ef" alt="Enhanced by Zemanta" /></a><span class="zem-script more-related more-info pretty-attribution"><script src="http://static.zemanta.com/readside/loader.js" type="text/javascript"></script></span></div>
</div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-components-post-js","jsonName":"post-discovered-a-cool-javascript-property-aab","path":"/post/discovered-a-cool-javascript-property/"};window.dataPath="612/path---post-discovered-a-cool-javascript-property-aab-0c8-76eWujO0jbuLTXqmhEVnoEi26FQ";/*]]>*/</script><script src="/swizecblog/webpack-runtime-b34af8fd410bb07c9828.js" async=""></script><script src="/swizecblog/app-49ff0b4ea28eff25fc3b.js" async=""></script><script src="/swizecblog/0-f215691c134019ee6fa5.js" async=""></script><script src="/swizecblog/component---src-components-post-js-dbedf083f25f7ad1f3b1.js" async=""></script></body></html>