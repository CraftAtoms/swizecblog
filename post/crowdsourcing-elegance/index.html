<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/swizecblog/component---src-components-post-js.345c7c4f16662f410581.css">@import url(https://fonts.googleapis.com/css?family=Lora);
html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;font-family:Lora,serif}body{background-color:#f6f6f6;margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{-webkit-text-decoration-skip:objects;background-color:transparent}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:Lora,serif;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{box-sizing:border-box;font:112.5%/1.45em georgia,serif;overflow-y:scroll}*,:after,:before{box-sizing:inherit}body{-moz-font-feature-settings:"kern","liga","clig","calt";-ms-font-feature-settings:"kern","liga","clig","calt";-webkit-font-feature-settings:"kern","liga","clig","calt";color:rgba(0,0,0,.8);font-family:Lora,serif;font-feature-settings:"kern","liga","clig","calt";font-kerning:normal;font-weight:400;word-wrap:break-word}img{margin:0 0 1.45rem;max-width:100%;padding:0}h1{font-size:2.25rem}h1,h2{color:inherit;font-family:Lora,serif;font-weight:700;line-height:1.1;margin:0 0 1.45rem;padding:0;text-rendering:optimizeLegibility}h2{font-size:1.62671rem}h3{font-size:1.38316rem}h3,h4{color:inherit;font-family:Lora,serif;font-weight:700;line-height:1.1;margin:0 0 1.45rem;padding:0;text-rendering:optimizeLegibility}h4{font-size:1rem}h5{font-size:.85028rem}h5,h6{color:inherit;font-family:Lora,serif;font-weight:700;line-height:1.1;margin:0 0 1.45rem;padding:0;text-rendering:optimizeLegibility}h6{font-size:.78405rem}hgroup{margin:0 0 1.45rem;padding:0}ol,ul{list-style-image:none;list-style-position:outside;margin:0 0 1.45rem 1.45rem;padding:0}dd,dl,figure,p{margin:0 0 1.45rem;padding:0}pre{background:rgba(0,0,0,.04);border-radius:3px;font-size:.85rem;line-height:1.42;margin:0 0 1.45rem;overflow:auto;padding:1.45rem;word-wrap:normal}table{border-collapse:collapse;font-size:1rem;line-height:1.45rem;width:100%}fieldset,table{margin:0 0 1.45rem;padding:0}blockquote{margin:0 1.45rem 1.45rem;padding:0}form,iframe,noscript{margin:0 0 1.45rem;padding:0}hr{background:rgba(0,0,0,.2);border:none;height:1px;margin:0 0 calc(1.45rem - 1px);padding:0}address{margin:0 0 1.45rem;padding:0}b,dt,strong,th{font-weight:700}li{margin-bottom:.725rem}ol li,ul li{padding-left:0}li>ol,li>ul{margin-bottom:.725rem;margin-left:1.45rem;margin-top:.725rem}blockquote :last-child,li :last-child,p :last-child{margin-bottom:0}li>p{margin-bottom:.725rem}code,kbd,samp{font-size:.85rem;line-height:1.45rem}abbr,abbr[title],acronym{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help}abbr[title]{text-decoration:none}td,th,thead{text-align:left}td,th{-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";border-bottom:1px solid rgba(0,0,0,.12);font-feature-settings:"tnum";padding:.725rem .96667rem calc(.725rem - 1px)}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}code,tt{background-color:rgba(0,0,0,.04);border-radius:3px;font-family:Lora,serif;padding:.2em 0}pre code{background:none;line-height:1.42}code:after,code:before,tt:after,tt:before{content:" ";letter-spacing:-.2em}pre code:after,pre code:before,pre tt:after,pre tt:before{content:""}@media only screen and (max-width:480px){html{font-size:100%}}

/*# sourceMappingURL=component---src-components-post-js.345c7c4f16662f410581.css.map*/</style><style data-styled-components="cEsjyT hklXLQ gpHXOM cTUdjA">
/* sc-component-id: sc-bdVaJa */
.cEsjyT{margin:3rem auto;max-width:960px;padding:1.25rem 1rem;} .cEsjyT ul{margin:0 0 0px 0;list-style:none;float:right;}
/* sc-component-id: sc-bwzfXH */
.cTUdjA{-webkit-text-decoration:none;text-decoration:none;text-align:right;margin:0 .5rem 0 .5rem;padding:10px;color:#7c51a1;} .cTUdjA:hover{color:#fff;background-color:#7c51a1;}
/* sc-component-id: sc-htpNat */
.gpHXOM{-webkit-text-decoration:none;text-decoration:none;color:black;} .gpHXOM:hover{-webkit-text-decoration:underline;text-decoration:underline;color:#7c51a1;} .gpHXOM h3{display:inline;font-size:30px;}
/* sc-component-id: sc-bxivhb */
.hklXLQ{margin:0 3rem 4.5rem;}</style><title data-react-helmet="true">Swizec Blog</title><meta data-react-helmet="true" name="description" content="Sample"/><meta data-react-helmet="true" name="keywords" content="sample, something"/><link as="script" rel="preload" href="/swizecblog/component---src-components-post-js-352e8466f0cbd742adc0.js"/><link as="script" rel="preload" href="/swizecblog/0-7538a10af02717828d76.js"/><link as="script" rel="preload" href="/swizecblog/app-e5d3c6935dd41a7392ed.js"/><link as="script" rel="preload" href="/swizecblog/webpack-runtime-bf7869bd5fe0e771eaf7.js"/><link rel="preload" href="/swizecblog/static/d/92/path---post-crowdsourcing-elegance-de-5-767-qHD4kS5xS7NF9zx4X4yg5noIOrE.json" as="fetch" crossOrigin="use-credentials"/></head><body><div id="___gatsby"><div><div class="sc-bdVaJa cEsjyT"><div class="sc-bxivhb hklXLQ"><a class="sc-htpNat gpHXOM" href="/swizecblog/"><h3>Swizec Teller</h3></a><ul><a class="sc-bwzfXH cTUdjA" href="/swizecblog/Business/">Business</a><a class="sc-bwzfXH cTUdjA" href="/swizecblog/Personal/">Personal</a><a class="sc-bwzfXH cTUdjA" href="/swizecblog/Technical/">Technical</a><a class="sc-bwzfXH cTUdjA" href="/swizecblog/Thoughts/">Thoughts</a></ul></div><h1>Crowdsourcing elegance</h1><div><div class="zemanta-img" style="margin: 1em; display: block;">
<div style="width: 250px" class="wp-caption alignright"><a href="http://www.flickr.com/photos/17291033@N00/6229977151"><img title="soba fest 095" src="http://swizec.com/blog/wp-content/uploads/2011/10/6229977151_4f39755c38_m1.jpg" alt="soba fest 095" width="240" height="155" /></a><p class="wp-caption-text">Image by ijiwaru jimbo via Flickr</p></div>
</div>
<p>On Friday I said that <a title="Functional isn’t always better" href="http://swizec.com/blog/functional-isnt-always-better/swizec/2591">Functional isn&#8217;t always better</a>, but really it was a post about my failings as a functional programmer in finding an elegant solution to the problem of transforming a list of values into a list of pairs.</p>
<p>Originally I described the problem like so:</p>
<blockquote><p>The problem is one of turning a list of values, say, <em>[A, B, C, D]</em> into a list of pairs with itself, like so <em>[[A,B], [A,C], [A,D], [B, C], [B,D], [C,D]].</em></p>
<p>Should be simple enough right? You just make another list shifted by one to the left, make a zip, then repeat until the second list is empty. This solution turns out to be horrible, looks ugly and I’m not even going to show it. So here’s my second functional solution … it’s a lot cleaner.</p></blockquote>
<p>Turns out the internet is <em>super awesome</em> and was more than willing to put me in my place. You guys posted a cumulative of 49 comments (on hackernews and this blog) and <a href="http://exampler.com/" target="_blank">Brian Marick</a> even posted a tutorial on approaching functional programming on this example, entitled <em><a href="http://www.exampler.com/blog/2011/10/07/top-down-design-in-functional-classic-programming-2/" target="_blank">Top-down design in &#8220;functional classic&#8221; programming</a>.</em></p>
<p>Solutions were posted in <a class="zem_slink" title="Clojure" href="http://clojure.org" rel="homepage">Clojure</a>, <a class="zem_slink" title="Haskell (programming language)" href="http://haskell.org" rel="homepage">Haskell</a>, <a class="zem_slink" title="Python (programming language)" href="http://www.python.org/" rel="homepage">Python</a>, J, Scala, <a class="zem_slink" title="JavaScript" href="http://en.wikipedia.org/wiki/JavaScript" rel="wikipedia">Javascript</a>, <a class="zem_slink" title="Erlang (programming language)" href="http://www.erlang.org" rel="homepage">Erlang</a>, <a class="zem_slink" title="Smalltalk" href="http://en.wikipedia.org/wiki/Smalltalk" rel="wikipedia">SmallTalk</a>, C#, <a class="zem_slink" title="Objective Caml" href="http://caml.inria.fr/index.en.html" rel="homepage">Ocaml</a>, F#, &#8230; and some language I didn&#8217;t recognize nor did the poster specify what it was.</p>
<h2>Clojure</h2>
<p>They ranged from painfully obvious (<a href="http://twitter.com/sbelak" target="_blank">@sbelak</a>)</p>
<pre lang="clojure">(combinations '[a b c d] 2)</pre>
<p>A saner (only core) solution in Clojure supposedly looks like this</p>
<pre lang="clojure">(defn tails [xs]
  (take-while not-empty (iterate rest xs)))

(defn pairs [xs]                                            
  (mapcat (partial map vector) (map repeat xs) (rest (tails xs))))</pre>
<h2>J</h2>
<p>To what the fuck am I looking at (I think this is J)</p>
<pre lang="J">a = 'abcd'

comb=: 4 : 0
 k=. i.&gt;:d=.y-x
 z=. (d$ ,&amp;.&gt;/\. &gt;:&amp;.&gt; z end.
 ; z
)

(2 comb #a) { a</pre>
<p>Most people seem to have given it a shot in either Clojure or Haskell, meaning that I need to look up both of those languages a whole lot more.</p>
<h2>Haskell</h2>
<p>This is my favourite Haskell solution, by <a href="https://twitter.com/#!/purzelrakete" target="_blank">@purzelrakete</a></p>
<pre lang="haskell">[[x, y] | x &lt;- set, y &lt;- set, x &lt; y]/pre&gt;</pre>
<h2>Javascript</h2>
<p>A really cool Javascript solution by Shaun Gilchrist.</p>
<pre lang="javascript">function pairs(set) {
    return _.isEmpty(set) ? [] : 
        _.map(_.rest(set), function(y){ return [_.first(set), y]})
        .concat(pairs(_.rest(set)));
}</pre>
<h2>C#</h2>
<p>For some reason I didn&#8217;t think C# would even make it to such a debate, but <a href="http://news.ycombinator.com/user?id=Strilanc" target="_blank">Strilanc</a> makes it quite elegant.</p>
<pre lang="C">list.SelectMany((e, i) =&gt; list.Skip(i+1).Select(f =&gt; Tuple.Create(e, f)))</pre>
<h2>Python</h2>
<p>Here&#8217;s a nice succint solution in Python</p>
<pre lang="python">[(x[i],x[j]) for i in range(len(x)) for j in range(i+1, len(x))]</pre>
<h2>Ocaml</h2>
<p>And Ocaml by the same guy (<a href="http://news.ycombinator.com/user?id=fab13n">fab13n</a>)</p>
<pre lang="ocaml">let rec pairs = function
    | a :: b -&gt; List.map (fun x -&gt; (a, x)) b @ (pairs b)
    | [] -&gt; []</pre>
<h2>F#</h2>
<p>According to <a href="http://twitter.com/demisbellot">@demisbellot</a> it would look like this in F#</p>
<pre lang="F">let rec pairs = function 
| h :: t -&gt; List.append [ for i in t -&gt; [h; i] ] (pairs t) 
| _ -&gt; []  

["A"; "B"; "C"; "D"] |&gt; pairs</pre>
<h2>Scala</h2>
<p>Scala by XxXX</p>
<pre lang="scala"> def pair(l : List[String]): List[Tuple2[String, String]] = l.size match {
 case 1 =&gt; Nil
 case _ =&gt; l.tail.flatMap { e =&gt; List((l.head, e)) } ++ pair(l.tail) 
}</pre>
<h2>Erlang</h2>
<p>By <a href="http://joelpm.com/">JoelPM</a> &#8230; although I&#8217;m not sure this is elegant.</p>
<pre lang="erlang">-module(combos).

-export([ combo/1 ]).

combo(List) -&gt;
  combo(List,[]).

combo([],Acc) -&gt;
  lists:reverse(Acc);
combo([H|T], Acc) -&gt;
  combo(T,permute(H,T,Acc)).

permute(X,[],Acc) -&gt;
  Acc;
permute(X,[H|T],Acc) -&gt;
  permute(X,T,[{X,H}|Acc]).
Output:
1&gt; combos:combo([a,b,c,d]).[{a,d},{a,c},{a,b},{b,d},{b,c},{c,d}]2&gt;</pre>
<h2>More javascript</h2>
<p>@refaktor gave it the most attempts &#8230; I think he had a boring weekend, or just got nerd sniped. Here&#8217;s his his final solution in javascript &#8230; would have expected rebol from him though.</p>
<pre lang="javascript">var f = function(a) { return a.length == 0 ? [] : (a.slice(1).map(function(x){return [a[0],x]})).concat(f(a.slice(1))); }</pre>
<h2>Smalltalk</h2>
<p>By Larry &#8230; he didn&#8217;t leave a link.</p>
<pre lang="smalltalk">
in := #(a b c d) asOrderedCollection.out := OrderedCollection new.in size timesRepeat: [	key := in removeFirst.	in do: [ :value |  out add:( Array with: key with: value). ].].
</pre>
<h2>Conclusion</h2>
<p>There were other good solutions, but I think these are the most interesting to look at. This whole experience proves that sometimes when you ask for help on the internets Good Things &#8482; happen.</p>
<p>It also proves that geeks <em>love</em> outdoing each other.</p>
<h6 class="zemanta-related-title" style="font-size: 1em;">Related articles</h6>
<ul class="zemanta-article-ul">
<li class="zemanta-article-ul-li"><a href="http://www.r-bloggers.com/hipster-programming-languages/">Hipster programming languages</a> (r-bloggers.com)</li>
<li class="zemanta-article-ul-li"><a href="http://mathias-biilmann.net/posts/2011/10/is-haskell-the-cure">Is Haskell the Cure?</a> (mathias-biilmann.net)</li>
<li class="zemanta-article-ul-li"><a href="http://dave.fayr.am/posts/2011-08-19-lets-go-shopping.html">Functional Programming Is Hard, That&#8217;s Why It&#8217;s Good</a> (dave.fayr.am)</li>
<li class="zemanta-article-ul-li"><a href="http://drknucklehead.wordpress.com/2011/10/02/what-is-clojure-who-should-use-it/">What is Clojure? Who Should Use It?</a> (drknucklehead.wordpress.com)</li>
</ul>
<div class="zemanta-pixie" style="margin-top: 10px; height: 15px;"><a class="zemanta-pixie-a" title="Enhanced by Zemanta" href="http://www.zemanta.com/"><img class="zemanta-pixie-img" style="border: none; float: right;" src="http://img.zemanta.com/zemified_e.png?x-id=6bdf0ca8-ad82-4ee8-a403-c51e98c02053" alt="Enhanced by Zemanta" /></a></div>
</div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-components-post-js","jsonName":"post-crowdsourcing-elegance-de5","path":"/post/crowdsourcing-elegance/"};window.dataPath="92/path---post-crowdsourcing-elegance-de-5-767-qHD4kS5xS7NF9zx4X4yg5noIOrE";/*]]>*/</script><script src="/swizecblog/webpack-runtime-bf7869bd5fe0e771eaf7.js" async=""></script><script src="/swizecblog/app-e5d3c6935dd41a7392ed.js" async=""></script><script src="/swizecblog/0-7538a10af02717828d76.js" async=""></script><script src="/swizecblog/component---src-components-post-js-352e8466f0cbd742adc0.js" async=""></script></body></html>