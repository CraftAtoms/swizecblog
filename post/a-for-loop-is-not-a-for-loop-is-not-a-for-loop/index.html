<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/swizecblog/component---src-components-post-js.345c7c4f16662f410581.css">@import url(https://fonts.googleapis.com/css?family=Lora);
html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;font-family:Lora,serif}body{background-color:#f6f6f6;margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{-webkit-text-decoration-skip:objects;background-color:transparent}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:Lora,serif;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{box-sizing:border-box;font:112.5%/1.45em georgia,serif;overflow-y:scroll}*,:after,:before{box-sizing:inherit}body{-moz-font-feature-settings:"kern","liga","clig","calt";-ms-font-feature-settings:"kern","liga","clig","calt";-webkit-font-feature-settings:"kern","liga","clig","calt";color:rgba(0,0,0,.8);font-family:Lora,serif;font-feature-settings:"kern","liga","clig","calt";font-kerning:normal;font-weight:400;word-wrap:break-word}img{margin:0 0 1.45rem;max-width:100%;padding:0}h1{font-size:2.25rem}h1,h2{color:inherit;font-family:Lora,serif;font-weight:700;line-height:1.1;margin:0 0 1.45rem;padding:0;text-rendering:optimizeLegibility}h2{font-size:1.62671rem}h3{font-size:1.38316rem}h3,h4{color:inherit;font-family:Lora,serif;font-weight:700;line-height:1.1;margin:0 0 1.45rem;padding:0;text-rendering:optimizeLegibility}h4{font-size:1rem}h5{font-size:.85028rem}h5,h6{color:inherit;font-family:Lora,serif;font-weight:700;line-height:1.1;margin:0 0 1.45rem;padding:0;text-rendering:optimizeLegibility}h6{font-size:.78405rem}hgroup{margin:0 0 1.45rem;padding:0}ol,ul{list-style-image:none;list-style-position:outside;margin:0 0 1.45rem 1.45rem;padding:0}dd,dl,figure,p{margin:0 0 1.45rem;padding:0}pre{background:rgba(0,0,0,.04);border-radius:3px;font-size:.85rem;line-height:1.42;margin:0 0 1.45rem;overflow:auto;padding:1.45rem;word-wrap:normal}table{border-collapse:collapse;font-size:1rem;line-height:1.45rem;width:100%}fieldset,table{margin:0 0 1.45rem;padding:0}blockquote{margin:0 1.45rem 1.45rem;padding:0}form,iframe,noscript{margin:0 0 1.45rem;padding:0}hr{background:rgba(0,0,0,.2);border:none;height:1px;margin:0 0 calc(1.45rem - 1px);padding:0}address{margin:0 0 1.45rem;padding:0}b,dt,strong,th{font-weight:700}li{margin-bottom:.725rem}ol li,ul li{padding-left:0}li>ol,li>ul{margin-bottom:.725rem;margin-left:1.45rem;margin-top:.725rem}blockquote :last-child,li :last-child,p :last-child{margin-bottom:0}li>p{margin-bottom:.725rem}code,kbd,samp{font-size:.85rem;line-height:1.45rem}abbr,abbr[title],acronym{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help}abbr[title]{text-decoration:none}td,th,thead{text-align:left}td,th{-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";border-bottom:1px solid rgba(0,0,0,.12);font-feature-settings:"tnum";padding:.725rem .96667rem calc(.725rem - 1px)}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}code,tt{background-color:rgba(0,0,0,.04);border-radius:3px;font-family:Lora,serif;padding:.2em 0}pre code{background:none;line-height:1.42}code:after,code:before,tt:after,tt:before{content:" ";letter-spacing:-.2em}pre code:after,pre code:before,pre tt:after,pre tt:before{content:""}@media only screen and (max-width:480px){html{font-size:100%}}

/*# sourceMappingURL=component---src-components-post-js.345c7c4f16662f410581.css.map*/</style><style data-styled-components="cEsjyT hklXLQ gpHXOM cTUdjA">
/* sc-component-id: sc-bdVaJa */
.cEsjyT{margin:3rem auto;max-width:960px;padding:1.25rem 1rem;} .cEsjyT ul{margin:0 0 0px 0;list-style:none;float:right;}
/* sc-component-id: sc-bwzfXH */
.cTUdjA{-webkit-text-decoration:none;text-decoration:none;text-align:right;margin:0 .5rem 0 .5rem;padding:10px;color:#7c51a1;} .cTUdjA:hover{color:#fff;background-color:#7c51a1;}
/* sc-component-id: sc-htpNat */
.gpHXOM{-webkit-text-decoration:none;text-decoration:none;color:black;} .gpHXOM:hover{-webkit-text-decoration:underline;text-decoration:underline;color:#7c51a1;} .gpHXOM h3{display:inline;font-size:30px;}
/* sc-component-id: sc-bxivhb */
.hklXLQ{margin:0 3rem 4.5rem;}</style><title data-react-helmet="true">Swizec Blog</title><meta data-react-helmet="true" name="description" content="Sample"/><meta data-react-helmet="true" name="keywords" content="sample, something"/><link as="script" rel="preload" href="/swizecblog/component---src-components-post-js-9d5fb6538e5aeddeb728.js"/><link as="script" rel="preload" href="/swizecblog/0-ed8d8080a34ece5ef8f5.js"/><link as="script" rel="preload" href="/swizecblog/app-8e5a12ea225b4ed6ef6a.js"/><link as="script" rel="preload" href="/swizecblog/webpack-runtime-5246e3ca1a8c4f82e8dd.js"/><link rel="preload" href="/swizecblog/static/d/37/path---post-a-for-loop-is-not-a-for-loop-is-not-a-for-loop-fe-5-c00-DMyR35k5YqdF30hjIF8TN6dDqQ.json" as="fetch" crossOrigin="use-credentials"/></head><body><div id="___gatsby"><div><div class="sc-bdVaJa cEsjyT"><div class="sc-bxivhb hklXLQ"><a class="sc-htpNat gpHXOM" href="/swizecblog/blog/"><h3>Swizec Teller</h3></a><ul><a class="sc-bwzfXH cTUdjA" href="/swizecblog/Business/">Business</a><a class="sc-bwzfXH cTUdjA" href="/swizecblog/Personal/">Personal</a><a class="sc-bwzfXH cTUdjA" href="/swizecblog/Technical/">Technical</a><a class="sc-bwzfXH cTUdjA" href="/swizecblog/Thoughts/">Thoughts</a></ul></div><h1>A for loop is not a for loop is not a for loop</h1><div><div class="zemanta-img" style="margin: 1em; display: block;">
<div style="width: 250px" class="wp-caption alignright"><a href="http://www.flickr.com/photos/56861611@N00/6260572607"><img class="zemanta-img-configured" title="IMG_1675" src="http://swizec.com/blog/wp-content/uploads/2011/10/6260572607_be8dca7de4_m2.jpg" alt="IMG_1675" width="240" height="180" /></a><p class="wp-caption-text">Image by Phliar via Flickr</p></div>
</div>
<p>For loops are kind of a big deal.</p>
<p>So big in fact that it&#8217;s virtually impossible to code any sizeable chunk of code without running into some sort of <a class="zem_slink" title="For loop" href="http://en.wikipedia.org/wiki/For_loop" rel="wikipedia">for loop</a> &#8230; sure, there&#8217;s such awesome things as pure <a class="zem_slink" title="Functional programming" href="http://en.wikipedia.org/wiki/Functional_programming" rel="wikipedia">functional languages</a> where for loops don&#8217;t look like for loops. But I&#8217;m fairly certain most of those eventually turn into some sort of for loop deep down in the bowels of assembler and machine code.</p>
<p>It is therefore fairly easy to assert that everyone needs to know for loops like the back of their hand.Â But how well do you really know them?</p>
<p>A few days ago I ran into a silly thing with a couple of friends. We somehow got reminded that C counts the head of a for loop as part of the loop&#8217;s scope, which means variables defined therein don&#8217;t really affect anyone outside the loop. But at the same time, it seems like many (most?) other languages don&#8217;t behave like this.</p>
<p>It seemed only reasonable to go write a for loop in many languages and see what happens.<!--more--></p>
<h2>C</h2>
<pre lang="C">

#include<stdio.h>

int main() {
  int i = 5;

  for (int i=0; i<2; i++) {
    printf("%d\n", i); // prints 0, 1
  }

  printf("%d\n", i); // prints 5
}
</pre>
<h2>PHP</h2>
<pre lang="php">
<?php

$i = 5;

for ($i=0; $i<2; $i++) {
  echo "for:$i\n"; // prints 0, 1
}

echo "after:$i\n"; // prints 2

$i = 5;

for ($j=0; $j<2; $j++) {
  $i = $j+1;
  echo "for:$i\n"; // prints 1, 2
}

echo "after:$i\n"; // prints 2

?>
</pre>
<h2>Java</h2>
<pre lang="java">
// does not compile

public class For {
    public static void main(String[] args) {
        int i = 5;

        for (int i; i<2; i++) {
            System.out.println("for:"+i);
        }

        System.out.println("after:"+i);
    }
}

</pre>
<h2>Scala</h2>
<pre lang="scala">


object forVarReuse extends App {
       var i=5;

       for (i<-1 to 2) {
           println("for:"+i); // prints 1, 2
       }

       println("after:"+i); // prints 5
}
</pre>
<h2>Perl</h2>
<pre lang="perl">

$i = 5;

for (local $i=0; $i<2; $i++) {
  print "for:$i\n"; # prints 0, 1
}

print "after:$i\n"; # prints 2

$i = 5;

for ($j=0; $j<2; $j++) {
  local $i = $j+1;
  print "for2:$i\n"; # prints 1, 2
}

print "after:$i\n"; # prints 5
</pre>
<h2>Ruby</h2>
<pre lang="ruby">

i = 5

for $i in 1..2
  print "for:", $i, "\n" # prints 1, 2
end

print "after:", i, "\n" # prints 5
</pre>
<h2>JavaScript</h2>
<pre lang="javascript">
var i = 5;

for (var i=0; i<2; i++) {
    console.log("for:"+i); // prints 0, 1
}

console.log("after:"+i); // prints 2

i = 5;

for (var j=0; j<2; j++) {
    var i = j+1;
    console.log("for2:"+i); // prints 1, 2
}

console.log("after:"+i); // prints 2</pre>
<h2>CoffeeScript</h2>
<pre lang="coffeescript">

i = 5

console.log i for i in [0,1] # prints 0, 1

console.log i # prints 1

i = 5

count = (i for i in [0,1])

console.log count # prints [ 0, 1 ]

console.log i # prints 1
</pre>
<h2>Python</h2>
<pre lang="python">

i = 5

for i in range(2):
    print "for:", i

print "after:", i

i = 5

print [i for i in range(2)] # prints [0, 1]

print "after:", i
</pre>
<h2>Conclusion</h2>
<p>The interesting part is how differently languages of the curly-braces family behave. Some consider the for loop its own scope, many don't. It's interesting to compare JavaScript and Perl. They both have a way to tell a variable to be defined in the local scope, but JavaScript simply doesn't let you do that with fors, apparently only functions have scope of their own.</p>
<p>Ruby is similar to Perl in this regard. That little dollar sign can change the scope and that's what let us pull off the trick since loops are important enough to warrant scope at all.</p>
<p>The biggest disappointment is Python. I was honestly expecting the <a class="zem_slink" title="List comprehension" href="http://en.wikipedia.org/wiki/List_comprehension" rel="wikipedia">list comprehension</a> to have its own scope, but alas.</p>
<h6 class="zemanta-related-title" style="font-size: 1em;">Related articles</h6>
<ul class="zemanta-article-ul">
<li class="zemanta-article-ul-li"><a href="http://eli.thegreenplace.net/2011/10/19/perls-guess-if-file-is-text-or-binary-implemented-in-python/">Eli Bendersky: Perl's "guess if file is text or binary" implemented in Python</a> (eli.thegreenplace.net)</li>
<li class="zemanta-article-ul-li"><a href="http://r.zemanta.com/?u=http%3A//www.infoworld.com/t/javascript/turn-your-nose-dart-and-instead-smell-the-coffeescript-176361&amp;a=58844108&amp;rid=eb2fce30-bdf3-42c1-b2c4-99be7c2b2888&amp;e=592da843a0319c02f51fddfdf273c138">Turn your nose up at Dart and instead smell the CoffeeScript</a> (infoworld.com)</li>
<li class="zemanta-article-ul-li"><a href="http://robots.thoughtbot.com/post/9251081564/coffeescript-spartan-javascript">This is CoffeeScript</a> (robots.thoughtbot.com)</li>
<li class="zemanta-article-ul-li"><a href="http://arstechnica.com/business/news/2011/10/javascript-has-problems-can-googles-dart-solve-them.ars">Feature: JavaScript has problems. Do we need Dart to solve them?</a> (arstechnica.com)</li>
<li class="zemanta-article-ul-li"><a href="http://dartinside.com/2011/dart-bashing/">Dart Bashing</a> (dartinside.com)</li>
<li class="zemanta-article-ul-li"><a href="http://hyperpolyglot.org/scripting">Hyperpolyglot: PHP, Perl, Python, Ruby</a> (hyperpolyglot.org)</li>
<li class="zemanta-article-ul-li"><a href="http://blog.izs.me/post/10213512387/javascript-is-not-web-assembly">JavaScript is Not Web Assembly</a> (izs.me)</li>
</ul>
<div class="zemanta-pixie" style="margin-top: 10px; height: 15px;"><a class="zemanta-pixie-a" title="Enhanced by Zemanta" href="http://www.zemanta.com/"><img class="zemanta-pixie-img" style="border: none; float: right;" src="http://img.zemanta.com/zemified_e.png?x-id=eb2fce30-bdf3-42c1-b2c4-99be7c2b2888" alt="Enhanced by Zemanta" /></a></div>
</div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-components-post-js","jsonName":"post-a-for-loop-is-not-a-for-loop-is-not-a-for-loop-fe5","path":"/post/a-for-loop-is-not-a-for-loop-is-not-a-for-loop/"};window.dataPath="37/path---post-a-for-loop-is-not-a-for-loop-is-not-a-for-loop-fe-5-c00-DMyR35k5YqdF30hjIF8TN6dDqQ";/*]]>*/</script><script src="/swizecblog/webpack-runtime-5246e3ca1a8c4f82e8dd.js" async=""></script><script src="/swizecblog/app-8e5a12ea225b4ed6ef6a.js" async=""></script><script src="/swizecblog/0-ed8d8080a34ece5ef8f5.js" async=""></script><script src="/swizecblog/component---src-components-post-js-9d5fb6538e5aeddeb728.js" async=""></script></body></html>