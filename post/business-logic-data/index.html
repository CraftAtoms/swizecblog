<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/swizecblog/component---src-components-post-js.345c7c4f16662f410581.css">@import url(https://fonts.googleapis.com/css?family=Lora);
html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;font-family:Lora,serif}body{background-color:#f6f6f6;margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{-webkit-text-decoration-skip:objects;background-color:transparent}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:Lora,serif;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{box-sizing:border-box;font:112.5%/1.45em georgia,serif;overflow-y:scroll}*,:after,:before{box-sizing:inherit}body{-moz-font-feature-settings:"kern","liga","clig","calt";-ms-font-feature-settings:"kern","liga","clig","calt";-webkit-font-feature-settings:"kern","liga","clig","calt";color:rgba(0,0,0,.8);font-family:Lora,serif;font-feature-settings:"kern","liga","clig","calt";font-kerning:normal;font-weight:400;word-wrap:break-word}img{margin:0 0 1.45rem;max-width:100%;padding:0}h1{font-size:2.25rem}h1,h2{color:inherit;font-family:Lora,serif;font-weight:700;line-height:1.1;margin:0 0 1.45rem;padding:0;text-rendering:optimizeLegibility}h2{font-size:1.62671rem}h3{font-size:1.38316rem}h3,h4{color:inherit;font-family:Lora,serif;font-weight:700;line-height:1.1;margin:0 0 1.45rem;padding:0;text-rendering:optimizeLegibility}h4{font-size:1rem}h5{font-size:.85028rem}h5,h6{color:inherit;font-family:Lora,serif;font-weight:700;line-height:1.1;margin:0 0 1.45rem;padding:0;text-rendering:optimizeLegibility}h6{font-size:.78405rem}hgroup{margin:0 0 1.45rem;padding:0}ol,ul{list-style-image:none;list-style-position:outside;margin:0 0 1.45rem 1.45rem;padding:0}dd,dl,figure,p{margin:0 0 1.45rem;padding:0}pre{background:rgba(0,0,0,.04);border-radius:3px;font-size:.85rem;line-height:1.42;margin:0 0 1.45rem;overflow:auto;padding:1.45rem;word-wrap:normal}table{border-collapse:collapse;font-size:1rem;line-height:1.45rem;width:100%}fieldset,table{margin:0 0 1.45rem;padding:0}blockquote{margin:0 1.45rem 1.45rem;padding:0}form,iframe,noscript{margin:0 0 1.45rem;padding:0}hr{background:rgba(0,0,0,.2);border:none;height:1px;margin:0 0 calc(1.45rem - 1px);padding:0}address{margin:0 0 1.45rem;padding:0}b,dt,strong,th{font-weight:700}li{margin-bottom:.725rem}ol li,ul li{padding-left:0}li>ol,li>ul{margin-bottom:.725rem;margin-left:1.45rem;margin-top:.725rem}blockquote :last-child,li :last-child,p :last-child{margin-bottom:0}li>p{margin-bottom:.725rem}code,kbd,samp{font-size:.85rem;line-height:1.45rem}abbr,abbr[title],acronym{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help}abbr[title]{text-decoration:none}td,th,thead{text-align:left}td,th{-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";border-bottom:1px solid rgba(0,0,0,.12);font-feature-settings:"tnum";padding:.725rem .96667rem calc(.725rem - 1px)}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}code,tt{background-color:rgba(0,0,0,.04);border-radius:3px;font-family:Lora,serif;padding:.2em 0}pre code{background:none;line-height:1.42}code:after,code:before,tt:after,tt:before{content:" ";letter-spacing:-.2em}pre code:after,pre code:before,pre tt:after,pre tt:before{content:""}@media only screen and (max-width:480px){html{font-size:100%}}

/*# sourceMappingURL=component---src-components-post-js.345c7c4f16662f410581.css.map*/</style><style data-styled-components="cEsjyT hklXLQ gpHXOM cTUdjA">
/* sc-component-id: sc-bdVaJa */
.cEsjyT{margin:3rem auto;max-width:960px;padding:1.25rem 1rem;} .cEsjyT ul{margin:0 0 0px 0;list-style:none;float:right;}
/* sc-component-id: sc-bwzfXH */
.cTUdjA{-webkit-text-decoration:none;text-decoration:none;text-align:right;margin:0 .5rem 0 .5rem;padding:10px;color:#7c51a1;} .cTUdjA:hover{color:#fff;background-color:#7c51a1;}
/* sc-component-id: sc-htpNat */
.gpHXOM{-webkit-text-decoration:none;text-decoration:none;color:black;} .gpHXOM:hover{-webkit-text-decoration:underline;text-decoration:underline;color:#7c51a1;} .gpHXOM h3{display:inline;font-size:30px;}
/* sc-component-id: sc-bxivhb */
.hklXLQ{margin:0 3rem 4.5rem;}</style><title data-react-helmet="true">Swizec Blog</title><meta data-react-helmet="true" name="description" content="Sample"/><meta data-react-helmet="true" name="keywords" content="sample, something"/><link as="script" rel="preload" href="/swizecblog/component---src-components-post-js-9d5fb6538e5aeddeb728.js"/><link as="script" rel="preload" href="/swizecblog/0-ed8d8080a34ece5ef8f5.js"/><link as="script" rel="preload" href="/swizecblog/app-8e5a12ea225b4ed6ef6a.js"/><link as="script" rel="preload" href="/swizecblog/webpack-runtime-5246e3ca1a8c4f82e8dd.js"/><link rel="preload" href="/swizecblog/static/d/180/path---post-business-logic-data-1-f-5-06b-6UR9SUDeAqZ8cPOeq8J7mY8InNY.json" as="fetch" crossOrigin="use-credentials"/></head><body><div id="___gatsby"><div><div class="sc-bdVaJa cEsjyT"><div class="sc-bxivhb hklXLQ"><a class="sc-htpNat gpHXOM" href="/swizecblog/blog/"><h3>Swizec Teller</h3></a><ul><a class="sc-bwzfXH cTUdjA" href="/swizecblog/Business/">Business</a><a class="sc-bwzfXH cTUdjA" href="/swizecblog/Personal/">Personal</a><a class="sc-bwzfXH cTUdjA" href="/swizecblog/Technical/">Technical</a><a class="sc-bwzfXH cTUdjA" href="/swizecblog/Thoughts/">Thoughts</a></ul></div><h1>How to think of your business logic as data</h1><div><p>I&#8217;ll never forget this lesson I learned from a friend in 6th or 7th grade.</p>
<p>We were building our own Windows clone. In <a href="https://en.wikipedia.org/wiki/Turbo_Pascal">Turbo Pascal</a>, running in <a href="https://en.wikipedia.org/wiki/DOS">DOS</a>, using a <a href="https://en.wikipedia.org/wiki/Text-based_user_interface">textual user interface</a> because we didn&#8217;t know how to do graphics.</p>
<p>If you&#8217;re too young to know about textual user interfaces, they looked like this:</p>
<img src="https://upload.wikimedia.org/wikipedia/commons/c/c5/Fdedit.png" />
<p>It&#8217;s got windows, buttons, a mouse cursor, and everything else you&#8217;d want in a modern user interface. Except graphics. It&#8217;s all made with ASCII characters.</p>
<p>I used to know the ASCII table by heart by back then ü§ì</p>
<p>Now, when I say <em>we</em> were building a new Windows, I don&#8217;t mean working together on a single project. We didn&#8217;t know how to do that. There was no Git or CVS or SVN back then. At least not that we knew of. The best we could do back then was to use diskettes to borrow each other&#8217;s code.</p>
<p>Oh, we also didn&#8217;t know about putting code in multiple files, so that was fun.</p>
<p>Anyway, the lesson he taught me about business logic being data came when we were both implementing our top row navigation. Like a menu, but for your whole system.</p>
<p>Oh yes, we built dropdown menus and everything. It&#8217;s amazing what a 13 year old with infinite free time can build in a few months.</p>
<h2>Avoid encoding business logic in the shape of your program</h2>
<p>Let&#8217;s say you have 6 items. <code>File</code>, <code>Edit</code>, <code>Format</code>, <code>View</code>, <code>Window</code>, and <code>Help</code>. That&#8217;s what iA Writer has.</p>
<p>Now let&#8217;s say you want to have a user action that goes through these items. My system used <code>left</code> and <code>right</code> arrow keys, my friend liked <code>j</code> and <code>k</code>, while MacOS relies on mouse alone.</p>
<p>You could build navigation like this:</p>
<pre lang="javascript">
onLeftKeyPress() {
    if (currentMenu === "File") {
        goTo("Help")
    }else if (currentMenu === "Edit") {
        goTo("File")
    }else if (currentMenu === "Format") {
        goTo("Edit")
    }else if (currentMenu === "View") {
        goTo("Format")
    }else if (currentMenu === "Window") {
        goTo("View")
    }else if (currentMenu === "Help") {
        goTo("Window")
    }
}

onRightKeyPress() {
    if (currentMenu === "File") {
        goTo("Edit")
    }else if (currentMenu === "Edit") {
        goTo("Format")
    }else if (currentMenu === "Format") {
        goTo("View")
    }else if (currentMenu === "View") {
        goTo("Window")
    }else if (currentMenu === "Window") {
        goTo("Help")
    }else if (currentMenu === "Help") {
        goTo("File")
    }
}
</pre>
<p>Nothing wrong with that. It&#8217;s readable, gets the job done, everything&#8217;s perfect. You congratulate yourself on an engineering problem well solved.</p>
<p>Then the PM comes in and says, <em>&#8220;We&#8217;ve been running tests, and this sequence doesn&#8217;t really work. Let&#8217;s change the order.‚Äù</em></p>
<p>Uh-oh.</p>
<p><em>&#8220;Oh, and we want different apps to have different menus.&#8221;</em></p>
<p>üí©</p>
<p>Now you have to rewrite that whole logic for every app. Every time the PM decides to change the order. That&#8217;s not fun at all!</p>
<p>So here&#8217;s what you can do instead.</p>
<pre lang="javascript">
items = ["File", "Edit", "Format", "View", "Window", "Help"]
currentItem = 0

onLeftKeyPress() {
    currentItem -= 1;
    if (currentItem < 0) currentItem = items.length-1;
    goTo(items[currentItem]);
}
onRightKeyPress() {
    currentItem += 1;
    if (currentItem >= items.length) currentItem = 0;
    goTo(items[currentItem]);
}
</pre>
<p>Array of options, pointer to current selection, move pointer when user does something. Now we&#8217;re talking!</p>
<p>With this approach, your system is flexible. You can change ordering, add elements, remove elements, even have different lists for different apps or users. It&#8217;s great.</p>
<p>No difficult refactoring every time your PM changes their mind, just a data change.</p>
<h2>But Swizec, nobody builds keyboard menus anymore!</h2>
<p>That&#8217;s true! People don&#8217;t use keyboards as much as they used to. My whole thing above is pointless when a user can directly tap or click whatever they want.</p>
<p>But we still live in a world of sequental flows. More than ever, things are designed as user flows that go backwards or forwards. Onboarding flows are a good example.</p>
<p>Screen1: &#8220;Hai&#8221;, Screen2: &#8220;Our app does X&#8221;, Screen3: &#8220;Sign up&#8221;, Screen4: &#8220;Gives us your phone number&#8221;, Screen5: &#8220;Credit card maybe?&#8221;, Screen6: &#8220;Do The Thing&#8221;</p>
<p>I simplify, but many apps have that flow.</p>
<p>You can build it as a hard-coded sequence of steps where each step must know who to call next. When your PM experiments, you&#8217;re in for a world of heavy refactoring.</p>
<p>I had fun like that just this week. Not my fault even! Others on the team decided to build it the not-data way, and now we all suffer. I&#8217;m sure they will learn their lesson soon üôÇ</p>
<h2>But Swiz, my flow has branches and shit</h2>
<p>So?</p>
<p>You&#8217;re going to go into your super fancy logic and insert a bunch of if statements all the time?</p>
<p>if goNext and currentScreen is &#8216;phone&#8217; and userSubscribed and‚Ä¶</p>
<p>Fuck.That.</p>
<p>Here&#8217;s how you do it:</p>
<pre><code>[() =&gt; userSubscribed ? &lt;CreditCard /&gt; : &lt;DoTheThing /&gt;, ...]
</code></pre>
<p>Put functions in your previous/next logic! Core logic stays simple, end result for user is a complex tree of options.</p>
<p>That can get tricky too, I know. But you know what always works? Tree traversal. You can model your flow as a tree and build a simple walker that goes into different branches of the tree based on stuff. Perhaps based on functions in the tree nodes themselves.</p>
<p>üòâ</p>
<p>Save time. Make business logic your data. If a Turing machine can do it, so can your app.</p>
<p>Happy hacking.</p>
</div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-components-post-js","jsonName":"post-business-logic-data-1f5","path":"/post/business-logic-data/"};window.dataPath="180/path---post-business-logic-data-1-f-5-06b-6UR9SUDeAqZ8cPOeq8J7mY8InNY";/*]]>*/</script><script src="/swizecblog/webpack-runtime-5246e3ca1a8c4f82e8dd.js" async=""></script><script src="/swizecblog/app-8e5a12ea225b4ed6ef6a.js" async=""></script><script src="/swizecblog/0-ed8d8080a34ece5ef8f5.js" async=""></script><script src="/swizecblog/component---src-components-post-js-9d5fb6538e5aeddeb728.js" async=""></script></body></html>