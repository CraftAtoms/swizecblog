{"data":{"wordpressPost":{"title":"Django protip #1: A better App structure","content":"<div class=\"zemanta-img\" style=\"margin: 1em; display: block;\">\n<div>\n<dl class=\"wp-caption alignright\" style=\"width: 310px;\">\n<dt class=\"wp-caption-dt\"><a href=\"http://en.wikipedia.org/wiki/File:Derfflinger%27s_crow%27s_nest.JPG\"><img title=\"Crow's nest of SMS Derfflinger\" src=\"http://swizec.com/blog/wp-content/uploads/2010/07/300px-Derfflinger%27s_crow%27s_nest.jpg\" alt=\"Crow's nest of SMS Derfflinger\" width=\"300\" height=\"429\" /></a></dt>\n<dd class=\"wp-caption-dd zemanta-img-attribution\" style=\"font-size: 0.8em;\">Image via <a href=\"http://en.wikipedia.org/wiki/File:Derfflinger%27s_crow%27s_nest.JPG\">Wikipedia</a></dd>\n</dl>\n</div>\n</div>\n<p>When I started coding for our latest project at Preona a bit of an epiphany happened. I suddenly <em>got</em> django. Every pattern that used to feel a bit strange and I may have fought a little, suddenly became obvious and simple. Suddenly out of the blue my whole <a class=\"zem_slink freebase/en/codebase\" title=\"Codebase\" rel=\"wikipedia\" href=\"http://en.wikipedia.org/wiki/Codebase\">codebase</a> is so marvelously organised and separated into files it brings a tear to my eye.</p>\n<p>In the old days the average <a class=\"zem_slink freebase/en/django_web_framework\" title=\"Django (web framework)\" rel=\"homepage\" href=\"http://www.djangoproject.com\">Django</a> App in my project had a structure a file structure a bit like so:</p>\n<ul>\n<li>models.py</li>\n<li>views.py</li>\n<li>tests.py</li>\n<li>RandomActualWorkLogic.py</li>\n<li>AnotherRandomOfWork.py</li>\n<li>&#8230;</li>\n</ul>\n<p>Sure this works quite alright, but it feels a little weird and after way too much work you suddenly realise that instead of the clean design you envisioned as you started out, you&#8217;re left with a <a class=\"zem_slink freebase/guid/9202a8c04000641f8000000000586299\" title=\"Crow's nest\" rel=\"wikipedia\" href=\"http://en.wikipedia.org/wiki/Crow%27s_nest\">crow&#8217;s nest</a> of interdependancy, circular crappery and your project is in pretty miserable shape.</p>\n<p>This point was really driven home when I figured two different django projects should share some code. Extrapolating a clean interface and making stuff work &#8230; was a nightmare. I actually gave up after a week and decided to start afresh.</p>\n<p>And boy, was that the best decision ever!</p>\n<h2>Better <a class=\"zem_slink freebase/en/application_software\" title=\"Application software\" rel=\"wikipedia\" href=\"http://en.wikipedia.org/wiki/Application_software\">application</a> structure</h2>\n<p>The first step was to take up a better way to organise my codebase inside applications. It goes something like this:</p>\n<ul>\n<li>models.py</li>\n<li>managers.py</li>\n<li>views.py</li>\n<li>tests.py</li>\n<li>forms.py</li>\n<li>decorators.py</li>\n<li>processing.py &#8212; <em>(this is for certain special views)</em></li>\n<li>urls.py</li>\n<li>settings.py</li>\n</ul>\n<p>The first result of this organisation is that now everything has its own place. There are no StrangeWorker.py crappy things anymore. All of those reside in a special &#8216;application&#8217; just for those called a <em>lib. </em>Whenever you are making something and are looking for a place to put it -&gt; the file is an obvious pick!</p>\n<p>Another great result is that it&#8217;s now much easier to keep applications contained within themselves. Because both its specific url config and its specific settings config are contained within the application you can easily switch it around between projects or even make it a standalone thingy that projects can simply include.</p>\n<p>Also because the file structure makes sense now and all those WeirdoWorker.py are separated elsewhere as proper libraries, there is less of a temptation to create mixed and confusing dependancies all over the place.</p>\n<h2>Conclusion</h2>\n<p>That&#8217;s it for django application structure. If you&#8217;ve got any better ideas do mention them on twitter or via the comments below. If not, that&#8217;s alright ðŸ˜›</p>\n<p>Either way, join me in the next installment of Django Protip when I&#8217;ll be talking about using &#8220;Forms, forms for everything&#8221;</p>\n<div class=\"zemanta-pixie\" style=\"margin-top: 10px; height: 15px;\"><a class=\"zemanta-pixie-a\" title=\"Enhanced by Zemanta\" href=\"http://www.zemanta.com/\"><img class=\"zemanta-pixie-img\" style=\"border: none; float: right;\" src=\"http://img.zemanta.com/zemified_e.png?x-id=1985aade-c198-44e0-a12f-c32c11144665\" alt=\"Enhanced by Zemanta\" /></a><span class=\"zem-script more-related more-info pretty-attribution\"><script src=\"http://static.zemanta.com/readside/loader.js\" type=\"text/javascript\"></script></span></div>\n"},"site":{"siteMetadata":{"title":"Swizec Blog","subtitle":"Fetch Data From Local WP Install"}}},"pageContext":{"id":"4bd6f3aa-4b8f-5c31-af6d-4854d7395ea4"}}