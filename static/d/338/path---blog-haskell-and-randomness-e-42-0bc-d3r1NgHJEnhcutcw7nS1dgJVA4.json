{"data":{"wordpressPost":{"title":"Haskell and randomness","content":"<p>I finally started writing code for my <a href=\"http://swizec.github.com/Le-Thesis/\" target=\"_blank\">thesis</a>. Hooray!</p>\n<div style=\"width: 310px\" class=\"wp-caption alignright\"><a href=\"http://en.wikipedia.org/wiki/File:Haskell_wiki.JPG\" target=\"_blank\"><img class=\"zemanta-img-inserted zemanta-img-configured\" title=\"A row of businesses in downtown Haskell.\" src=\"http://upload.wikimedia.org/wikipedia/en/thumb/8/89/Haskell_wiki.JPG/300px-Haskell_wiki.JPG\" alt=\"A row of businesses in downtown Haskell.\" width=\"300\" height=\"225\" /></a><p class=\"wp-caption-text\">A row of businesses in downtown Haskell. (Photo credit: Wikipedia)</p></div>\n<p>To get my feet wet I decided to write a basic framework for <a class=\"zem_slink\" title=\"Evolutionary algorithm\" href=\"http://en.wikipedia.org/wiki/Evolutionary_algorithm\" rel=\"wikipedia\" target=\"_blank\">evolutionary algorithms</a> in <a class=\"zem_slink\" title=\"Haskell (programming language)\" href=\"http://haskell.org\" rel=\"homepage\" target=\"_blank\">Haskell</a>. Nothing too major, just a way to easily assemble different evaluation, mutation and selection functions.</p>\n<p>For starters I&#8217;m going to evolve a <em>&#8220;<a class=\"zem_slink\" title=\"Hello world program\" href=\"http://en.wikipedia.org/wiki/Hello_world_program\" rel=\"wikipedia\" target=\"_blank\">Hello World!</a>&#8220;</em> string. How hard could it be? Took me <a href=\"http://swizec.com/blog/evolving-a-poem-with-an-hour-of-python-hacking/swizec/1505\" target=\"_blank\">an hour to evolve a poem in python</a> based on character mutations &#8230;</p>\n<p>Turns out it&#8217;s a lot more difficult to do in Haskell.</p>\n<p>Trouble starts as soon as you try generating a random population, because getting random numbers in Haskell is somewhat involved. Or rather, it looks scarily involved at first.</p>\n<h2>Random Generators</h2>\n<p>The main problem comes from how <a class=\"zem_slink\" title=\"Pseudorandom number generator\" href=\"http://en.wikipedia.org/wiki/Pseudorandom_number_generator\" rel=\"wikipedia\" target=\"_blank\">pseudo-random</a> generators work. Essentially you start with a <em>seed</em> &#8211; it can be anything, I hear current time is a good starting seed &#8211; then every time somebody needs a new random number, you perform some formula on the <em>seed</em> and get a number.</p>\n<p>The next number then depends on the previous number and so on until infinity. Your garden variety recursively defined series. Not very random at all, but works well enough for most.</p>\n<p>Noticed the problem?</p>\n<p>Yep, random generators rely on state and state is this hated, somewhat annoying thing to handle in Haskell. Monads may sound simple, but until you get the hang of them everything looks a bit odd.</p>\n<p>Oh and you wouldn&#8217;t want to pollute your whole codebase with a monad just because you want to start your whole algorithm with some random stuff, would you?</p>\n<p>No you wouldn&#8217;t, it&#8217;s messy.</p>\n<p>After a lot of searching (and a lot of scary suggestions), this was the cleanest solution I could find:</p>\n<pre lang=\"haskell\">\r\nimport System.Random\r\n\r\n-- takes a random generator and returns a list of strings of 50 chars\r\nstart_population :: (RandomGen g) => g -> [[Char]]\r\nstart_population gen =\r\n  [take 50 $ randomRs ('A', 'z') gen | x <- [0..]]\r\n\r\nmain = do\r\n  randomGen <- newStdGen  -- get a random generator\r\n\r\n  print $ take 2 $ start_population randomGen  -- use it as a function argument\r\n</pre>\n<p>The best part about this approach is that Haskell automatically gives you a <em>standard generator,</em> which already takes a seed from some sort of input - not sure what it uses - so your results will look reasonably random.</p>\n<p>But when you want to do testing, you can just as easily do this:</p>\n<pre lang=\"haskell\">\r\nlet rand = mkStdGen 42\r\nprint $ take 2 $ randomRs ('a', 'z') rand\r\n</pre>\n<p>Which will <em>always</em> print the same two characters <em>\"nd\"</em>.</p>\n<p>Very useful when you want to test your code actually works!</p>\n<p>There's just one problem with this approach - it's very difficult to up and decide that hey, this particular function right here, should be somewhat random from now on! You now have to tell the whole system and everyone using the function, that you'd like a random generator please.</p>\n<p>Whether you should want to do that without telling anyone ... well, that's a whole other story.</p>\n<h6 class=\"zemanta-related-title\" style=\"font-size: 1em;\">Related articles</h6>\n<ul class=\"zemanta-article-ul zemanta-article-ul-image\" style=\"margin-left: 0; display: inline-block; list-style-type: none;\">\n<li class=\"zemanta-article-ul-li-image zemanta-article-ul-li\" style=\"display: inline-block; vertical-align: top; text-align: left; font-size: 12px; width: 80px; height: 240px; margin: 10px 40px 20px 0px; zoom: 1; *display: inline;\"><a href=\"http://www.r-bloggers.com/quasi-random-number-generation-in-r/\" target=\"_blank\"><img style=\"padding: 0; margin: 0 10px 10px 0; border: 0; display: block; box-shadow: 1px 1px 3px #999;\" src=\"http://i.zemanta.com/noimg_05_80_80.jpg\" alt=\"\" /></a><a style=\"display: block; width: 80px; height: 90px; overflow: hidden; text-decoration: none; line-height: 14pt;\" href=\"http://www.r-bloggers.com/quasi-random-number-generation-in-r/\" target=\"_blank\">Quasi-Random Number Generation in R</a>\n<div style=\"clear: both; margin: 10px 0 10px 0;\">\n<hr style=\"margin: 0;\" />\n</div>\n</li>\n<li class=\"zemanta-article-ul-li-image zemanta-article-ul-li\" style=\"display: inline-block; vertical-align: top; text-align: left; font-size: 12px; width: 80px; height: 240px; margin: 10px 40px 20px 0px; zoom: 1; *display: inline;\"><a href=\"http://cs.stackexchange.com/questions/2576/most-efficient-algorithm-to-print-1-100-using-a-given-random-number-generator\" target=\"_blank\"><img style=\"padding: 0; margin: 0 10px 10px 0; border: 0; display: block; box-shadow: 1px 1px 3px #999;\" src=\"http://i.zemanta.com/noimg_10_80_80.jpg\" alt=\"\" /></a><a style=\"display: block; width: 80px; height: 90px; overflow: hidden; text-decoration: none; line-height: 14pt;\" href=\"http://cs.stackexchange.com/questions/2576/most-efficient-algorithm-to-print-1-100-using-a-given-random-number-generator\" target=\"_blank\">Most efficient algorithm to print 1-100 using a given random number generator</a>\n<div style=\"clear: both; margin: 10px 0 10px 0;\">\n<hr style=\"margin: 0;\" />\n</div>\n</li>\n<li class=\"zemanta-article-ul-li-image zemanta-article-ul-li\" style=\"display: inline-block; vertical-align: top; text-align: left; font-size: 12px; width: 80px; height: 240px; margin: 10px 40px 20px 0px; zoom: 1; *display: inline;\"><a href=\"http://swizec.com/blog/why-i-still-havent-learned-haskell/swizec/4663\" target=\"_blank\"><img style=\"padding: 0; margin: 0 10px 10px 0; border: 0; display: block; box-shadow: 1px 1px 3px #999;\" src=\"http://i.zemanta.com/94978044_80_80.jpg\" alt=\"\" /></a><a style=\"display: block; width: 80px; height: 90px; overflow: hidden; text-decoration: none; line-height: 14pt;\" href=\"http://swizec.com/blog/why-i-still-havent-learned-haskell/swizec/4663\" target=\"_blank\">Why I still haven't learned Haskell</a>\n<div style=\"clear: both; margin: 10px 0 10px 0;\">\n<hr style=\"margin: 0;\" />\n</div>\n</li>\n<li class=\"zemanta-article-ul-li-image zemanta-article-ul-li\" style=\"display: inline-block; vertical-align: top; text-align: left; font-size: 12px; width: 80px; height: 240px; margin: 10px 40px 20px 0px; zoom: 1; *display: inline;\"><a href=\"http://www.haskell.org/haskellwiki/index.php?title=Future_of_Haskell&amp;diff=46219&amp;oldid=prev\" target=\"_blank\"><img style=\"padding: 0; margin: 0 10px 10px 0; border: 0; display: block; box-shadow: 1px 1px 3px #999;\" src=\"http://i.zemanta.com/noimg_16_80_80.jpg\" alt=\"\" /></a><a style=\"display: block; width: 80px; height: 90px; overflow: hidden; text-decoration: none; line-height: 14pt;\" href=\"http://www.haskell.org/haskellwiki/index.php?title=Future_of_Haskell&amp;diff=46219&amp;oldid=prev\" target=\"_blank\">Future of Haskell</a>\n<div style=\"clear: both; margin: 10px 0 10px 0;\">\n<hr style=\"margin: 0;\" />\n</div>\n</li>\n<li class=\"zemanta-article-ul-li-image zemanta-article-ul-li\" style=\"display: inline-block; vertical-align: top; text-align: left; font-size: 12px; width: 80px; height: 240px; margin: 10px 40px 20px 0px; zoom: 1; *display: inline;\"><a href=\"http://www.reddit.com/r/haskell/comments/vi425/what_are_everyones_favorite_aha_moments_in/\" target=\"_blank\"><img style=\"padding: 0; margin: 0 10px 10px 0; border: 0; display: block; box-shadow: 1px 1px 3px #999;\" src=\"http://i.zemanta.com/noimg_20_80_80.jpg\" alt=\"\" /></a><a style=\"display: block; width: 80px; height: 90px; overflow: hidden; text-decoration: none; line-height: 14pt;\" href=\"http://www.reddit.com/r/haskell/comments/vi425/what_are_everyones_favorite_aha_moments_in/\" target=\"_blank\">What are everyone's favorite \"aha\" moments in learning Haskell?</a>\n<div style=\"clear: both; margin: 10px 0 10px 0;\">\n<hr style=\"margin: 0;\" />\n</div>\n</li>\n</ul>\n<div class=\"zemanta-pixie\" style=\"margin-top: 10px; height: 15px;\"><a class=\"zemanta-pixie-a\" title=\"Enhanced by Zemanta\" href=\"http://www.zemanta.com/?px\"><img class=\"zemanta-pixie-img\" style=\"border: none; float: right;\" src=\"http://img.zemanta.com/zemified_e.png?x-id=59e72f89-c756-45f4-96c1-5afa691394af\" alt=\"Enhanced by Zemanta\" /></a></div>\n"},"site":{"siteMetadata":{"title":"Swizec Blog","subtitle":"Fetch Data From Local WP Install"}}},"pageContext":{"id":"353dd571-c8b4-53b8-a27e-257ade18cc3e"}}