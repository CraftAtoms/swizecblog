{"data":{"wordpressPost":{"title":"node-unshortener can unshort any url","content":"<div class=\"zemanta-img\" style=\"margin: 1em; display: block;\">\n<div style=\"width: 310px\" class=\"wp-caption alignright\"><a href=\"http://commons.wikipedia.org/wiki/File:Twitter_Inc_HQ.jpg\"><img title=\"Twitter Inc HQ\" src=\"http://upload.wikimedia.org/wikipedia/commons/thumb/b/b3/Twitter_Inc_HQ.jpg/300px-Twitter_Inc_HQ.jpg\" alt=\"Twitter Inc HQ\" width=\"300\" height=\"400\" /></a><p class=\"wp-caption-text\">Image via Wikipedia</p></div>\n</div>\n<p>Lately I&#8217;ve been spending my evenings and nights working on a super secret and above awesome project that I will talk about &#8230; soon, when it&#8217;s a bit more ready.</p>\n<p><em style=\"font-size: 1.3em;\">tl; dr -&gt; <a href=\"https://github.com/Swizec/node-unshortener\">github link to source</a></em></p>\n<p>That project deals mostly with <a class=\"zem_slink\" title=\"Twitter\" rel=\"homepage\" href=\"http://twitter.com\">Twitter</a> and harnessing url&#8217;s from the stream. As anyone who&#8217;s sniffed at Twitter lately can atest, therea re many, many <em>many</em> strange urls floating around, using any number of <a class=\"zem_slink\" title=\"URL shortening\" rel=\"wikipedia\" href=\"http://en.wikipedia.org/wiki/URL_shortening\">url shortening</a> schemes or what seems to have become quite fashionable, a custom domains that are shortenered via services nobody could guess at.</p>\n<p>But when you&#8217;re trying to do something useful with these it&#8217;s usually much easier when you have the original url to work with. Especially when it comes to doing things for specific domains.</p>\n<p>What&#8217;s needed is some sort of library that can unshort pretty much any url you throw at it. Surely someone has already made one right?</p>\n<p>Turns out, outside of a few services, no such thing existed &#8230; and I didn&#8217;t want to use a third party service. Naturally I set out to make my own library for unshortening short links.</p>\n<p>You can check out the source <a href=\"https://github.com/Swizec/node-unshortener\">on github</a>.</p>\n<h2>Example</h2>\n<p>It&#8217;s pretty simple to use, only has one function you should care about ðŸ™‚</p>\n<pre lang=\"javascript\" line=\"1\">\r\nvar unshortener = require('unshortener');\r\n\r\n// you can pass in a url object or string\r\nunshortener.expand('http://fb.me/UXVqinvO',\r\n                   function (url) {\r\n                       console.log(url.href);\r\n\r\n\t\t       // prints: http://www.facebook.com/photo.php?pid=514346&l=30b4ab9bbd&id=132853273433650\r\n                   });\r\n</pre>\n<h2>Simple logic</h2>\n<p>The approach is pretty simple:</p>\n<ul>\n<li>take a url</li>\n<li>check if known service</li>\n<li>know it &#8211;&gt; use an <a class=\"zem_slink\" title=\"Application programming interface\" rel=\"wikipedia\" href=\"http://en.wikipedia.org/wiki/Application_programming_interface\">API</a></li>\n<li>wtf &#8211;&gt; pretend to be a browser</li>\n</ul>\n<p>As you can see, the library is pretty simple, just 68 sloc of <a class=\"zem_slink\" title=\"JavaScript\" rel=\"wikipedia\" href=\"http://en.wikipedia.org/wiki/JavaScript\">JavaScript</a> code. But simple solutions are good solutions I&#8217;m told and this little thing does everything I need it to do.</p>\n<p>Right now it directly supports only bit.ly and is.gd, so if you know of any more shorteners with an expand API please tell me so I can add them. Following redirects is a bit messy and I&#8217;d prefer to do as much as possible through official API&#8217;s.</p>\n<h6 class=\"zemanta-related-title\" style=\"font-size: 1em;\">Related articles</h6>\n<ul class=\"zemanta-article-ul\">\n<li class=\"zemanta-article-ul-li\"><a href=\"http://fakeiitian.com/social-media-news/bre-ad-transforms-the-url-shortener-into-a-promotional-tool-invites/\">Bre.ad Transforms the URL Shortener Into a Promotional Tool [INVITES]</a> (fakeiitian.com)</li>\n<li class=\"zemanta-article-ul-li\"><a href=\"http://earleyedition.com/2011/04/07/half-of-all-tweets-generated-by-just-20k-elite-users/\">Half of all tweets generated by just 20K elite users</a> (earleyedition.com)</li>\n<li class=\"zemanta-article-ul-li\"><a href=\"http://www.businessinsider.com/a-year-later-heres-who-ended-up-getting-screwed-by-twitter-2011-5\">Here&#8217;s Who Ended Up Getting Screwed By Twitter</a> (businessinsider.com)</li>\n</ul>\n<div class=\"zemanta-pixie\" style=\"margin-top: 10px; height: 15px;\"><a class=\"zemanta-pixie-a\" title=\"Enhanced by Zemanta\" href=\"http://www.zemanta.com/\"><img class=\"zemanta-pixie-img\" style=\"border: none; float: right;\" src=\"http://img.zemanta.com/zemified_e.png?x-id=40f7cd74-cf88-4a4f-81e2-f510c2ef13b2\" alt=\"Enhanced by Zemanta\" /></a></div>\n"},"site":{"siteMetadata":{"title":"Swizec Blog","subtitle":"Fetch Data From Local WP Install"}}},"pageContext":{"id":"871cba68-044a-5d31-bdf5-fc5c9c9006c5"}}