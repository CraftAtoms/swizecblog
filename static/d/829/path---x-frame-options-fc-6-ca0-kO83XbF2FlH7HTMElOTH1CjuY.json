{"data":{"wordpressPost":{"title":"WTF is X-Frame-Options?","content":"<p>Here’s a fun way to waste an afternoon:</p>\n<ol>\n<li>You have a user flow that involves reading user docs: some gDocs, some YouTube videos, and some UI practice links of your own.</li>\n<li>Opening these in a new tab is annoying, right?</li>\n<li>So you move them into modals using <code>iframe</code>s</li>\n<li>Everything works! ??</li>\n<li>Then, you give it to QA…</li>\n<li>2 out of 8 links don’t open for them.</li>\n<li>O.o</li>\n</ol>\n<p>Every link opens a modal with an iframe. That part works. Two of the links – a YouTube video and a UI practice widget – never load.</p>\n<p>You think it might be a slowness issue because you wait a few seconds and there’s no loading indicator. So you ask them to wait… doesn’t help. QA waits for many minutes but the two <code>iframe</code>s stay blank.</p>\n<p>o.O</p>\n<p>You investigate. It still works for you. But QA is using Windows.</p>\n<p>You find a Windows machine, do the Windows 10 forced update dance, and download the latest Chrome. It’s not a computer you use very often. The touchpad feels funny.</p>\n<p>The two <code>iframe</code>s, they don’t load. Wut.</p>\n<p>The console sheds a clue: Refused to display because it set <code>X-Frame-Options</code> to <code>SAMEORIGIN</code>.</p>\n<p>What the hell is X-Frame-Options? Why does Google <a href=\"https://www.google.com/search?q=x-frame-options&amp;oq=x-frame&amp;aqs=chrome.0.0j69i57j69i61j0l3.1573j0j1&amp;sourceid=chrome&amp;ie=UTF-8\">only return results</a> and StackOverflow questions from 2010, 2012, and 2013. Most of them still in PHP! Why have I not heard of this!?</p>\n<hr />\n<p><code>X-Frame-Options: SAMEORIGIN</code> is an HTTP header that guards websites against clickjacking attacks. It tells browsers, <em>“Yo, don’t open this page in an iframe”</em>.</p>\n<p>YouTube sets the header for URLs that aren’t <code>embed</code> links, which explains the single YT link that didn’t work in my case. I was using <code>embed</code> links for all but one of them. ?</p>\n<p>And our own practice-the-interface link?</p>\n<p>Rails 4 sets <code>X-Frame-Options: SAMEORIGIN</code> for everything as a default security measure. I just never noticed before.</p>\n<p>At least it was easy to fix – don’t send the header. 😀</p>\n<p>But why did it work on <em>my</em> computer?</p>\n<p>At first, I thought maybe it’s because Chrome Mac and Chrome Windows behave differently. I tried on a coworker’s machine, and it didn’t work. It stopped the <code>iframe</code>s like it’s supposed to.</p>\n<p>Then I thought, “Maybe it’s because I’m on localhost.” Nope, wasn’t that.</p>\n<p>Maybe it figures out <code>swizec.ngrok.io</code> points to my local machine? Wait… the YouTube link worked, so it can’t be that.</p>\n<p>…Why doesn’t my computer protect me from clickjacking? This is not ideal…</p>\n<p>But hey, at least I know about X-Frame-Options now. That was fun. ?</p>\n"},"site":{"siteMetadata":{"title":"Swizec Blog","subtitle":"Fetch Data From Local WP Install"}}},"pageContext":{"id":"40be8d93-9e2d-59f3-aafd-ee9b62ee36b7"}}