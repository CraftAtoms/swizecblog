{"data":{"wordpressPost":{"title":"Using Backbone to improve multiselects","content":"<p>Sometimes you need to ask a users for multiple answers to a single question. But what&#8217;s the best way to go about it?</p>\n<div id=\"attachment_4176\" style=\"width: 770px\" class=\"wp-caption alignnone\"><a href=\"swizec.github.com/checkbox-field/\"><img class=\" wp-image-4176  \" title=\"Checkbox-field\" src=\"http://swizec.com/blog/wp-content/uploads/2012/04/Screen-Shot-2012-04-13-at-10.43.12-PM.png\" alt=\"Checkbox-field\" width=\"760\" height=\"152\" srcset=\"https://swizec.com/blog/wp-content/uploads/2012/04/Screen-Shot-2012-04-13-at-10.43.12-PM.png 950w, https://swizec.com/blog/wp-content/uploads/2012/04/Screen-Shot-2012-04-13-at-10.43.12-PM-300x60.png 300w\" sizes=\"(max-width: 760px) 100vw, 760px\" /></a><p class=\"wp-caption-text\">Checkbox-field</p></div>\n<p>A multiselect input <a class=\"zem_slink\" title=\"Field (mathematics)\" href=\"http://en.wikipedia.org/wiki/Field_%28mathematics%29\" rel=\"wikipedia\" target=\"_blank\">field</a> is kind of strange for the user, sticks out and doesn&#8217;t really behave like everything else on the web.</p>\n<p>A bunch of <a class=\"zem_slink\" title=\"Checkbox\" href=\"http://en.wikipedia.org/wiki/Checkbox\" rel=\"wikipedia\" target=\"_blank\">checkboxes</a> is better for the user &#8230; but have you ever tried handling a form with dynamically created checkboxes? Let alone creating useful tests and consolidating everything into a single list of values. No decent forms framework will let you do that easily.</p>\n<p>I had to solve this similar problem for aÂ <a href=\"http://www.nextpunch.com/\" target=\"_blank\">time and attendance software</a>Â I worked on, so I made a <a class=\"zem_slink\" title=\"JavaScript\" href=\"http://en.wikipedia.org/wiki/JavaScript\" rel=\"wikipedia\" target=\"_blank\">Javascript</a> thing to convert a select field into a <a href=\"http://swizec.github.com/checkbox-field/\" target=\"_blank\">checkbox-field</a>. Then I made it into a simple jquery plugin thing for everyone to use ðŸ™‚</p>\n<p><a style=\"font-size: 1.2em;\" href=\"http://swizec.github.com/checkbox-field/\" target=\"_blank\">Check out the demo!</a></p>\n<p>The idea is pretty simple:</p>\n<ul>\n<li>take a select, turn it into a list of options</li>\n<li>every option becomes a <em>Checkbox</em>Â model in a collection</li>\n<li>render each Checkbox as a <em>CheckboxView</em></li>\n<li>connect everything with some events</li>\n</ul>\n<p>What I really love about the Backbone approach is that all of this works almost magically. Instead of bending over backwards to get checkboxes and the hidden multiselect synced up, all I had to do was create some models, some views and tell them how they are connected.</p>\n<p>This is how the field itself is created</p>\n<pre lang=\"javascript\">$multiselect.find(\"option\").each(function (i, el) {\r\n    var $el = $(el);\r\n    // hidden behind the scenes here is that:\r\n    // 1. creating a Checkbox, correctly binds together all needed events\r\n    // 2. adding it to checkboxes, takes care of rendering and adding to the DOM\r\n    checkboxes.add(new Checkbox({value: $el.val(),\r\n                                 label: $el.html(),\r\n                                 selected: $el.attr('selected')}));\r\n});</pre>\n<p>And to make sure data is synced up between its three representations (multiselect, visual checkboxes, the <a class=\"zem_slink\" title=\"Data structure\" href=\"http://en.wikipedia.org/wiki/Data_structure\" rel=\"wikipedia\" target=\"_blank\">data structure</a> itself), all it takes is this:</p>\n<pre lang=\"javascript\">var Checkbox = Backbone.Model.extend({\r\n    initialize: function () {\r\n        this.bind(\"change:selected\", this.toggled);\r\n\r\n        this.attributes.id = this.cid;\r\n    },\r\n\r\n    toggled: function () {\r\n        var $opt = $multiselect.find(\"option[value=\"+this.get('value')+\"]\");\r\n\r\n        if (this.get('selected')) {\r\n            $opt.attr(\"selected\", \"1\");\r\n        }else{\r\n            $opt.removeAttr(\"selected\");\r\n        }\r\n    }\r\n});</pre>\n<p>Yep, that&#8217;s the whole model and that&#8217;s all it takes to sync everything up. Pretty cool huh? I remember trying to do this with just <a class=\"zem_slink\" title=\"JQuery\" href=\"http://jquery.com/\" rel=\"homepage\" target=\"_blank\">jQuery</a> once &#8230; I nearly stabbed my eyes out to end the misery.</p>\n<p>All in all the whole thing is just <em>123 sloc</em>, which can only mean one thing: Backbone is cool.</p>\n<p>If you use my <a href=\"http://swizec.github.com/checkbox-field/\" target=\"_blank\">checkbox-field</a> library, it&#8217;s only going to be a single sloc for you:</p>\n<pre lang=\"javascript\">$(\"#my_selector\").checkboxField();</pre>\n<p>That&#8217;s it ðŸ™‚</p>\n<p>Let me know what you think.</p>\n<h6 class=\"zemanta-related-title\" style=\"font-size: 1em;\">Related articles</h6>\n<ul class=\"zemanta-article-ul\">\n<li class=\"zemanta-article-ul-li\"><a href=\"http://blog.ki6i.com/jquery-multiselect-abreviation-list/\" target=\"_blank\">JQuery Multiselect &#8211; Abbreviation List</a> (ki6i.com)</li>\n<li class=\"zemanta-article-ul-li\"><a href=\"http://stackoverflow.com/questions/8877080/retrieving-selected-values-from-wpf-listbox-with-multiselect\" target=\"_blank\">Retrieving selected values from WPF ListBox with multiselect</a> (stackoverflow.com)</li>\n<li class=\"zemanta-article-ul-li\"><a href=\"http://stackoverflow.com/questions/9025172/how-can-i-get-element-state-from-appendchild-checkbox-in-javascript\" target=\"_blank\">How can I get element state from appendchild checkbox in Javascript?</a> (stackoverflow.com)</li>\n<li class=\"zemanta-article-ul-li\"><a href=\"http://stackoverflow.com/questions/9404605/controlling-checkboxes-in-html\" target=\"_blank\">Controlling Checkboxes in HTML</a> (stackoverflow.com)</li>\n<li class=\"zemanta-article-ul-li\"><a href=\"http://stackoverflow.com/questions/9396182/simulate-holding-ctrl-key\" target=\"_blank\">Simulate Holding Ctrl Key</a> (stackoverflow.com)</li>\n</ul>\n<div class=\"zemanta-pixie\" style=\"margin-top: 10px; height: 15px;\"><a class=\"zemanta-pixie-a\" title=\"Enhanced by Zemanta\" href=\"http://www.zemanta.com/\"><img class=\"zemanta-pixie-img\" style=\"border: none; float: right;\" src=\"http://img.zemanta.com/zemified_e.png?x-id=f7e989e4-2ff3-4685-8e25-afe1c681042a\" alt=\"Enhanced by Zemanta\" /></a></div>\n"},"site":{"siteMetadata":{"title":"Swizec Blog","subtitle":"Fetch Data From Local WP Install"}}},"pageContext":{"id":"7265a3d5-0a0e-57e2-8ec0-94fe97083d3a"}}