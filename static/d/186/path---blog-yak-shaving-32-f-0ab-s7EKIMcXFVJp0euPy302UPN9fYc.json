{"data":{"wordpressPost":{"title":"This is Yak Shaving","content":"<img src=\"http://i.imgur.com/t0XHtgJ.gif\" />\n<p>I sat down to write about a rendering technique I use to quickly wrap random D3 code in React components. I call them &quot;blackbox components&quot; because they&#39;re a black box.</p>\n<p>It&#39;s already a chapter in <a href=\"https://gumroad.com/l/mTWg\">React+D3v4</a> and a <a href=\"https://codepen.io/swizec/pen/woNjVw\">CodePen</a>. How hard can it be to write a post?</p>\n<p>Then I thought, <em>”This is dumb. People shouldn&#39;t keep rewriting this. It should be an npm module.”</em></p>\n<p>So I started making a library.</p>\n<p>Then I remembered that <a href=\"https://swizec.com/blog/livecoding-19-its-hard-to-package-a-library/swizec/6927\">compiling</a> <a href=\"https://swizec.com/blog/livecoding-21-use-babel-for-libraries-not-webpack/swizec/6982\">libraries</a> sucks.</p>\n<p>So I went to copy config files from an <a href=\"https://github.com/Swizec/react-transitionable-component\">old transition library I did</a>. But the files were old and out of date. Possibly copied from a 0.2.x version of <code>create-react-app</code>.</p>\n<p>Terrible.</p>\n<p>So I looked for a <code>create-react-lib</code> because the <code>-app</code> version creates too much stuff that libraries don&#39;t need. Like all the setup for <code>index.html</code> and assets and webpack dev and webpack prod and eslint and jest and a default app page and…</p>\n<p>Couldn&#39;t find one. Used <code>create-react-app</code>, ejected, copied config files, removed the parts I don&#39;t need.</p>\n<p>30 minutes in: no post, no library, but I’ve got the config I need to get started.</p>\n<p>So I copied the code from CodePen and cleaned it up and added some imports and exports. Made it Real Code™.</p>\n<p>Then I thought, <em>&quot;You know, this technique can work for things that aren&#39;t SVG. There&#39;s plenty of stuff people might wanna use.&quot;</em></p>\n<p>So I added a version that uses <code>&lt;div&gt;</code> instead of <code>&lt;g&gt;</code>.</p>\n<p>Then I compiled. <code>node_modules/babel-cli/bin/babel.js src --out-dir lib</code>. It worked! ?</p>\n<p>Now, how do I test this?  ?</p>\n<p>So I started writing an example project. Create react app and all of that. <code>npm link</code> to use unpublished library. Neat trick, that.</p>\n<p>I started with the same axis example from CodePen. <code>import BlackboxSvgHOC</code>, use it to make an <code>Axis</code> component, render in an <code>&lt;svg&gt;</code>.</p>\n<p>Error. Files not found.</p>\n<p>Investigate, find a typo in the filename, fix, reload, renders default React app.</p>\n<img class=\"alignnone size-full wp-image-7397\" src=\"https://swizec.com/blog/wp-content/uploads/2017/01/default-app.gif\" width=\"606\" height=\"387\" />\n<p>Waitaminute! Where&#39;s my example axis? How am I gonna add more awesome examples if I can&#39;t even load an axis?</p>\n<p>Sigh. There&#39;s a nasty error in the console. Pretty sure I&#39;ve never seen that one before.</p>\n<img class=\"alignnone size-full wp-image-7396\" src=\"https://swizec.com/blog/wp-content/uploads/2017/01/error-screenshot.png\" width=\"878\" height=\"408\" srcset=\"https://swizec.com/blog/wp-content/uploads/2017/01/error-screenshot.png 878w, https://swizec.com/blog/wp-content/uploads/2017/01/error-screenshot-300x139.png 300w, https://swizec.com/blog/wp-content/uploads/2017/01/error-screenshot-768x357.png 768w\" sizes=\"(max-width: 878px) 100vw, 878px\" />\n<p>How do you even debug that?  ?</p>\n<p>So I went to play Dirt3 for 20 minutes. To regain focus, ya know.</p>\n<p>Then I wrote this story. And I wish I was kidding, but it took me an hour. Twitter is distracting.</p>\n<p>3 hours after I started: no article, no library, no working code, no example project.</p>\n<p>This is <a href=\"https://en.wiktionary.org/wiki/yak_shaving\">yak shaving</a>. Don&#39;t do this.</p>\n"},"site":{"siteMetadata":{"title":"Swizec Blog","subtitle":"Fetch Data From Local WP Install"}}},"pageContext":{"id":"fdf4cb87-4030-5f22-a0f0-0531736ecf4f"}}