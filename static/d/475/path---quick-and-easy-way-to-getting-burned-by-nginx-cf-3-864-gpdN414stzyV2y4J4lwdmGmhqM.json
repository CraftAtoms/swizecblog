{"data":{"wordpressPost":{"title":"Quick and easy way to getting burned by nginx","content":"<p><div style=\"width: 190px\" class=\"wp-caption alignright\"><img title=\"HTTP 403: Forbidden\" src=\"http://swizec.com/blog/wp-content/uploads/2011/10/2990635787_f61ba8ce93_m1.jpg\" alt=\"HTTP 403: Forbidden\" /></a><p class=\"wp-caption-text\">HTTP 403: Forbidden</p></div><br />\nOriginally I wanted to write about something else today, but this is so brilliantly simple I just have to push back the original post for a few days.</p>\n<p>A couple of hours ago I was talking about my past and current projects with someone and they mentioned that Hipstervision was down. Returning a nasty <a class=\"zem_slink\" title=\"HTTP 403\" href=\"http://en.wikipedia.org/wiki/HTTP_403\" rel=\"wikipedia\">403 error</a>.</p>\n<p>What the hell?</p>\n<p>I know I&#8217;ve left that site fall by the wayside lately as I was focusing on other things, but it should nevertheless at least respond with <em>something</em> when you try visiting it.</p>\n<p><a class=\"zem_slink\" title=\"Nginx\" href=\"http://www.nginx.org/\" rel=\"homepage\">Nginx</a> was running. Node.js processes were running as well. And yet, the 403 error persisted.</p>\n<p>Restarted everything. Went through all the relevant configurations and still .. nothing. Everything checks out. It makes absolutely no sense for the damn site to be returning a 403.</p>\n<p>So I try some other sites running on the same server. All but one return a 403.</p>\n<p>Whaaat? O.o</p>\n<p>And then I tried a particular document from the working site, on a different domain. It worked. Served the document flawlessly.</p>\n<p>But &#8230; dear Nginx, I&#8217;m using server_name things, you were supposed to treat each domain as a somewhat different server and respond accordingly. I mean, come on, this is technology from the late 1990&#8217;s when people realized it might be useful to have more than one website per server.</p>\n<p>Turns out in all config files I had this:</p>\n<pre>server {\r\n\tlisten 80;\r\n        server_name hipstervision.org;</pre>\n<p>But on that particular site I had:</p>\n<pre>server {\r\n\tlisten my-ip:80;\r\n        server_name something.something;</pre>\n<p>Not sure why that was the case, but apparently Nginx pushes all requests to the most specific <em>listen</em> rule first and only worries about domains and server names later.</p>\n<p>Good to know!</p>\n<h6 class=\"zemanta-related-title\" style=\"font-size: 1em;\">Related articles</h6>\n<ul class=\"zemanta-article-ul\">\n<li class=\"zemanta-article-ul-li\"><a href=\"http://www.kevinworthington.com/nginx-for-mac-os-x-lion-in-2-minutes/\">Nginx for Mac OS X Lion in 2 minutes</a> (kevinworthington.com)</li>\n<li class=\"zemanta-article-ul-li\"><a href=\"http://www.kevinworthington.com/nginx-1-1-2-for-windows/\">Nginx 1.1.2 for Windows</a> (kevinworthington.com)</li>\n<li class=\"zemanta-article-ul-li\"><a href=\"http://sascho.wordpress.com/2011/10/01/installing-nginx-with-php5-and-php-fpm-and-mysql-support-on-centos-6-0/\">Installing Nginx With PHP5 (And PHP-FPM) And MySQL Support On CentOS 6.0</a> (sascho.wordpress.com)</li>\n</ul>\n<div class=\"zemanta-pixie\" style=\"margin-top: 10px; height: 15px;\"><a class=\"zemanta-pixie-a\" title=\"Enhanced by Zemanta\" href=\"http://www.zemanta.com/\"><img class=\"zemanta-pixie-img\" style=\"border: none; float: right;\" src=\"http://img.zemanta.com/zemified_e.png?x-id=68da6e63-59a0-45b6-9697-bbee074199fe\" alt=\"Enhanced by Zemanta\" /></a></div>\n"},"site":{"siteMetadata":{"title":"Swizec Blog","subtitle":"Fetch Data From Local WP Install"}}},"pageContext":{"id":"c8551a74-7007-5f52-a6ac-8a673b022bd5"}}